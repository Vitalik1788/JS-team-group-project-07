{"mappings":"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","sources":["src/catalog.js","src/JS/catalog-page.js","src/JS/catalog/components/refs.js","src/JS/catalog/components/api_service.js","node_modules/@swc/helpers/lib/_define_property.js","<<jsx-config-pragma.js>>"],"sourcesContent":["import './JS/header.js';\nimport './JS/hero.js';\nimport './JS/catalog-page.js';","// Импорты\n\nimport { refs } from './catalog/components/refs';\nimport ApiService from './catalog/components/api_service';\n\n\n// import createMovieCard from \"../js/catalog/components/create-movie-card\";\n// import createErrorMarkup from \"./catalog/components/create-error-markup\";\n\n\n// Змінні\nconst apiService = new ApiService();\nlet currentPage = 1;\n\n// Слушатели событий\n\nrefs.searchForm.addEventListener('submit', getInputValue);\nrefs.cancelBtn.addEventListener('click', clearInputValue);\nrefs.searchInput.addEventListener('input', onInput);\nrefs.nextPageBtn.addEventListener('click', onNextPage);\nrefs.prevPageBtn.addEventListener('click', onPrevPage);\n\n// Приховання елементів\n\nrefs.errorContainer.classList.add('is-hidden');\nrefs.cancelBtn.classList.add('is-hidden');\n\n// Запит трендів тижня\n\nrenderWeeklyTrends(currentPage);\n\n// Функции\n\nfunction renderWeeklyTrends(page) {\n  apiService.getMovies(page).then(handleMoviesData).catch(handleError);\n}\n\nfunction handleMoviesData(data) {\n  createMovieCard(data);\n  refs.paginationButton.textContent = currentPage;\n  updateNextButtonState(data.total_pages);\n}\n\nfunction handleError(error) {\n  refs.catalogList.innerHTML = '';\n  createErrorMarkup();\n  console.error('An error occurred:', error);\n}\n\nfunction getInputValue(e) {\n  e.preventDefault();\n\n  refs.paginationContainer.classList.remove('is-hidden');\n  refs.errorContainer.classList.add('is-hidden');\n\n  const query = refs.searchInput.value.trim();\n  apiService.query = query;\n  apiService.resetPage();\n  apiService.resetTotal();\n\n  if (query === '') {\n    handleEmptyQuery();\n  } else {\n    searchMovies();\n  }\n}\n\nfunction handleEmptyQuery() {\n  refs.catalogList.innerHTML = '';\n  createErrorMarkup();\n}\n\nasync function searchMovies() {\n  try {\n    const data = await apiService.getMovies();\n    if (data.total_results === 0) {\n      handleEmptyResults();\n    } else {\n      apiService.total = data.total_results;\n      createMovieCard(data);\n      currentPage = data.page;\n      refs.paginationButton.textContent = currentPage;\n    }\n    refs.searchInput.value = '';\n  } catch (error) {\n    handleError(error);\n  }\n}\n\nfunction handleEmptyResults() {\n  refs.catalogList.innerHTML = '';\n  createErrorMarkup();\n}\n\nfunction onInput(e) {\n  if (e.currentTarget.value.trim()) {\n    refs.cancelBtn.classList.remove('is-hidden');\n  } else {\n    refs.cancelBtn.classList.add('is-hidden');\n  }\n}\n\nfunction clearInputValue() {\n  refs.cancelBtn.classList.add('is-hidden');\n  refs.searchInput.value = '';\n}\n\nfunction updateNextButtonState(totalPages) {\n  if (currentPage === totalPages) {\n    refs.nextPageBtn.setAttribute('disabled', 'disabled');\n  } else {\n    refs.nextPageBtn.removeAttribute('disabled');\n  }\n}\n\nfunction onNextPage() {\n  currentPage += 1;\n  apiService.incrementPage();\n  renderWeeklyTrends(currentPage);\n}\n\nfunction onPrevPage() {\n  if (currentPage > 1) {\n    currentPage -= 1;\n    apiService.decrementPage();\n    renderWeeklyTrends(currentPage);\n  }\n}\n","export const refs = {\n  searchForm: document.getElementById('movieSearchForm'),\n  searchInput: document.getElementById('movieInput'),\n  catalogList: document.getElementById('movieList'),\n  errorContainer: document.querySelector('.error-container'),\n  searchBtn: document.querySelector('.search-button'),\n  cancelBtn: document.querySelector('.cancel-button'),\n  paginationContainer: document.querySelector('.pagination-wrapper'),\n  paginationButton: document.querySelector('.pagination-button'),\n  nextPageBtn: document.querySelector('.next-button'),\n  prevPageBtn: document.querySelector('.prev-button'),\n};\n","export default class ApiService {\n  static BASE_URL = 'https://api.themoviedb.org/3';\n  static API_KEY = '41b8f9437bf3f899281f8a3f9bdc0891';\n\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    this.totalAmount = 0;\n  }\n\n  async getMovies() {\n    const options = {\n      method: 'GET',\n      headers: {\n        accept: 'application/json',\n        Authorization: `Bearer ${ApiService.API_KEY}`,\n      },\n    };\n\n    let url = '';\n    if (this.searchQuery) {\n      url = `${ApiService.BASE_URL}/search/movie?api_key=${ApiService.API_KEY}&query=${this.searchQuery}&include_adult=false&language=en-US&page=${this.page}`;\n    } else {\n      url = `${ApiService.BASE_URL}/trending/all/week?api_key=${ApiService.API_KEY}&language=en-US&page=${this.page}`;\n    }\n\n    try {\n      const response = await fetch(url, options);\n      const movies = await response.json();\n      return movies;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  decrementPage() {\n    this.page -= 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n\n  get total() {\n    return this.totalAmount;\n  }\n\n  set total(newTotal) {\n    this.totalAmount = newTotal;\n  }\n\n  resetTotal() {\n    this.totalAmount = 0;\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n",null],"names":["parcelRequire","$bpxeT","$4f46e7d62bf318ec$export$21666b427502ea6d","searchForm","document","getElementById","searchInput","catalogList","errorContainer","querySelector","searchBtn","cancelBtn","paginationContainer","paginationButton","nextPageBtn","prevPageBtn","Object","defineProperty","$cec85eba0a352189$exports","value","default","obj","key","enumerable","configurable","writable","$b2a941d7e2598d40$export$2e2bcd8739ae039","ApiService","this","searchQuery","page","totalAmount","$parcel$interopDefault","$2TvXO","mark","_callee","options","url","response","movies","method","headers","accept","Authorization","concat","API_KEY","_this","BASE_URL","fetch","_ctx","sent","json","console","error","t0","newQuery","newTotal","$bb7034ce721467d9$var$apiService","$bb7034ce721467d9$var$currentPage","$bb7034ce721467d9$var$renderWeeklyTrends","getMovies","then","$bb7034ce721467d9$var$handleMoviesData","catch","$bb7034ce721467d9$var$handleError","data","totalPages","createMovieCard","textContent","total_pages","setAttribute","removeAttribute","innerHTML","createErrorMarkup","$bb7034ce721467d9$var$_searchMovies","total_results","$bb7034ce721467d9$var$handleEmptyResults","total","apply","arguments","addEventListener","e","preventDefault","classList","remove","add","query","trim","resetPage","resetTotal","$bb7034ce721467d9$var$searchMovies","currentTarget","incrementPage","decrementPage"],"version":3,"file":"catalog.cd6ec149.js.map"}