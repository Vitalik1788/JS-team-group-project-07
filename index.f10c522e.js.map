{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/JS/library/library.js","src/JS/library/api-library.js","node_modules/@parcel/runtime-js/lib/runtime-61674f17393dbce8.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-390bfd4c5e2d7e43.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import API from './api-library';\nimport defaultImg from '../../images/default.jpg';\n\nconst libraryRef = document.querySelector('.library-card-list');\n\n\nconst btnLib = document.querySelector('.btn');\n\ntry {\n  createLIibraryMovieCard();\n} catch (error) {\n  console.log(error);\n}\n\nif (btnLib) {\n  btnLib.addEventListener('click', handleFilm);\n}\n\nexport function handleFilm(event) {\n  const id = event.currentTarget.dataset.id;\n  console.log(btnLib);\n  console.log(event);\n  console.log(btnLib.hasAttribute('data-add'));\n  if (btnLib.hasAttribute('data-add')) {\n    console.log('data-add');\n    btnLib.removeAttribute('data-add');\n\n    btnLib.setAttribute('data-remove', '');\n\n    btnLib.textContent = 'Remove from my library';\n    checkMoviCard(id);\n  } else if (btnLib.hasAttribute('data-remove')) {\n    console.log('data-remove');\n    btnLib.removeAttribute('data-remove');\n\n    btnLib.setAttribute('data-add', '');\n\n    btnLib.textContent = 'Add to my library';\n    deleteCardLibrary(id);\n  }\n}\n\n/////// ПРОВЕРКА НАЛИЧИЯ ID В LOCAL STORAGE /////////\n\nexport function checkMoviCard(id) {\n  const libraryList = JSON.parse(localStorage.getItem('library'));\n\n  if (libraryList === null) {\n    getMovi(id);\n\n    console.log('cccccccccc');\n  } else {\n    const findMoviId = libraryList.find(x => x.id === Number(id));\n\n    if (findMoviId !== undefined) {\n      return;\n    } else {\n      getMovi(id);\n      console.log('eeeeeeeeee');\n    }\n  }\n}\n\n/////// ПОЛУЧЕНИЯ ОТ СЕРВЕРА ФИЛЬМА ПО ID ///////\n\nasync function getMovi(id) {\n  const res = await API.getMoviById(id);\n  const moviObj = res.data;\n  addCardLibrary(moviObj);\n  console.log('gggggggggggg');\n}\n\n///// ФУНКЦИЯ ДОБАВЛЕНИЯ В LOCAL STORAGE ///////\n\nfunction addCardLibrary(moviObj) {\n  let library = [];\n  console.log(library);\n  library.push(moviObj);\n  console.log(library);\n  localStorage.setItem('library', JSON.stringify(library));\n  createLIibraryMovieCard();\n}\n\n///// ФУНКЦИЯ УДАЛЕНИЯ ИЗ LOCAL STORAGE ///////\n\nexport function deleteCardLibrary(id) {\n  const libraryList = JSON.parse(localStorage.getItem('library'));\n  const deletedItem = libraryList.find(x => x === id);\n  library.pop(deletedItem);\n  console.log(library.length);\n  localStorage.setItem('library', JSON.stringify(library));\n  createLIibraryMovieCard();\n}\n\nfunction createLIibraryMovieCard() {\n  library = JSON.parse(localStorage.getItem('library'));\n  console.log(library);\n  if (library === null || library.length === 0  ) {\n    console.log('qqqqqqqqqqqqqq');\n    libraryRef.innerHTML = `<div class=\"library-info\">\n        <p class=\"library-info-info\" style=\"color: white;\"> OOPS... </p>\n        <p class=\"library-info-info\" style=\"color: white;\"> We are very sorry!</p>\n        <p class=\"library-info-info\" style=\"color: white;\"> You don’t have any movies at your library.</p>\n        </div>`;\n  } else {\n    const markup = JSON.parse(localStorage.getItem('library'))\n      .map(movie => {\n        const imageSrc = movie.poster_path\n          ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n          : `${defaultImg}`;\n\n        return `<li class=\"card-item item\">\n              <img class=\"film-poster\" src=\"${imageSrc}\" alt=\"${\n          movie.original_title\n        }\" />\n              <div class=\"overlay\">\n                <div class=\"film-info\">\n                  <p class=\"film-title\">${\n                    movie.original_title || movie.name\n                  }</p>\n                  <div class=\"film-details\">\n                     <span class=\"film-description\">${\n                       new Date(movie.release_date).getFullYear() ||\n                       new Date(movie.first_air_date).getFullYear()\n                     } </span>\n                    <span class=\"film-rating\">${Math.round(\n                      movie.vote_average\n                    )}</span>\n                  </div>\n                </div>\n              </div>\n            </li>`;\n      })\n      .join('');\n\n    libraryRef.innerHTML = markup;\n  }\n}\n\n/////////////////////////////////////////////////////\n// const btnLib = document.querySelector('.btn');\n// btnLib.addEventListener('click', function (event) {\n//   const id = event.currentTarget.dataset.id;\n//   console.log(id);\n\n//   // if (btnLib.getAttribute('data-click') === '1') {\n//   //   btnLib.setAttribute('data-click', '2');\n//   //   btnLib.textContent = 'Remove from my library';\n//   //   checkMoviCard(id);\n//   // } else {\n//   //   btnLib.setAttribute('data-click', '1');\n//   //   btnLib.textContent = 'Add to my library';\n//   //   deleteCardLibrary(id);\n//   // }\n// });\n\n/////////////////////////////////////////\n// async function getMovi(id) {\n//   const moviObj = await API.getMoviById(id);\n//   console.log(moviObj);\n//   checkMoviCard(id , moviObj);\n// }\n\n// function checkMoviCard(id , moviObj) {\n//   const libraryItem = localStorage.getItem('library');\n\n//   const libraryList = JSON.parse(libraryItem);\n\n//   if (libraryItem === null) {\n//     addCardLibrary(moviObj);\n//     console.log(moviObj);\n//     console.log('qweqweqeqeqdqxx');\n\n//   } else {\n\n//     const findMovi = libraryList.map(x => x.data);\n//     const findMoviId = findMovi.find(x => x.id === Number(id));\n\n//     if (findMoviId !== undefined) {\n//       return;\n\n//     } else {\n\n//       addCardLibrary(moviObj);\n//       console.log('qweqweqeqeqdqxx');\n//     }\n//   }\n// }\n\n// function addCardLibrary(moviObj) {\n//   library.push(moviObj);\n//   console.log(library);\n//   localStorage.setItem('library', JSON.stringify(library));\n// }\n\n//   function deleteCardLibrary(moviObj) {\n//     const qwe = localStorage.getItem('library')\n//     console.log( JSON.parse(qwe))\n//     library.pop(moviObj)\n//     console.log(library)\n//     localStorage.setItem('library' , JSON.stringify(library))\n//   }\n","import axios from \"axios\";\n\n\nconst API_KEY = 'b67c8518c930f00572f5eefdd7a9d563';\n\n\nasync function getMoviById(id) {\n    const options = {\n        method: 'GET',\n        headers: {\n          accept: 'application/json',\n          Authorization: `Bearer ${API_KEY}`,\n        },\n      };\n    return axios\n      .get(`https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}`)\n\n      \n      .then(res => (res))\n      \n      .catch(error => {\n        console.log('EROR');\n      });\n\n     \n}\nexport default { getMoviById }","module.exports = require('./helpers/bundle-url').getBundleURL('2hvCh') + require('./helpers/bundle-manifest').resolve(\"iNwWb\");","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2hvCh\\\":\\\"index.f10c522e.js\\\",\\\"iNwWb\\\":\\\"default.183d728c.jpg\\\"}\"));"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$bpxeT","parcelRequire","$c0fd536b763c3354$var$libraryRef","document","querySelector","$c0fd536b763c3354$var$btnLib","$c0fd536b763c3354$var$createLIibraryMovieCard","error","console","log","$c0fd536b763c3354$var$getMovi","$c0fd536b763c3354$var$_getMovi","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","res","$599li","default","getMoviById","_ctx","sent","$c0fd536b763c3354$var$addCardLibrary","data","moviObj","library","push","localStorage","setItem","JSON","stringify","parse","getItem","innerHTML","markup","map","movie","imageSrc","poster_path","concat","$3Ujrf","original_title","name","Date","release_date","getFullYear","first_air_date","Math","round","vote_average","join","addEventListener","event","currentTarget","dataset","hasAttribute","removeAttribute","setAttribute","textContent","libraryList","undefined","find","x","Number","$c0fd536b763c3354$export$9da70ed535e71d37","deletedItem","pop","$c0fd536b763c3354$export$cbc3412bdf3eebaf","$3bf50a3d547e1fb9$var$API_KEY","$3bf50a3d547e1fb9$var$_getMoviById","method","headers","accept","Authorization","$dIxxU","get","then","catch","$3bf50a3d547e1fb9$export$2e2bcd8739ae039","module","exports","getBundleURL","resolve","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","register"],"version":3,"file":"index.f10c522e.js.map"}