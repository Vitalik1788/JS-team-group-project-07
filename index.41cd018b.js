function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},r=e.parcelRequired7c6;null==r&&((r=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var r={id:t,exports:{}};return n[t]=r,e.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},e.parcelRequired7c6=r),r.register("g3iFJ",(function(t,e){const n=document.getElementById("menu"),i=document.querySelector("nav"),r=document.getElementById("overlay"),o=document.querySelector("body");n.addEventListener("click",(()=>{i.style.left="0",r.style.display="block",o.style.overflow="hidden"})),r.addEventListener("click",(()=>{i.style.left="-64%",r.style.display="none",o.style.overflow="auto"}));const s=document.querySelector(".switcher");let c="true"===localStorage.getItem("isLight");document.body.classList.toggle("light",c),s.onclick=function(){c=!c,document.body.classList.toggle("light",c),localStorage.setItem("isLight",c)};const a=window.location.href,l=document.querySelectorAll(".mobile-menu__link, .header__nav-link");if(l[0].classList.add("current__nav-link"),l[3].classList.add("current__nav-link"),!a.includes("index"))return a.includes("catalog")?(l[0].classList.remove("current__nav-link"),l[3].classList.remove("current__nav-link"),l[1].classList.add("current__nav-link"),void l[4].classList.add("current__nav-link")):a.includes("library")?(l[0].classList.remove("current__nav-link"),l[3].classList.remove("current__nav-link"),l[1].classList.remove("current__nav-link"),l[4].classList.remove("current__nav-link"),l[2].classList.add("current__nav-link"),void l[5].classList.add("current__nav-link")):void 0})),r("h85Iw"),r("g3iFJ"),r("8oZBs");var o=r("2shzp");o=r("2shzp");async function s(t,e){try{const n=Array.from(e),i=t.map((t=>{const e=n.find((e=>e.id===t));return e?e.name:""}));let r="";return r=i.length>2?i.slice(0,2).join(", ")+" and other":i.join(", "),console.log(r),r}catch(t){return l(t),""}}var c=r("h85Iw");function a(t){const e=t.map((async({id:t,poster_path:e,release_date:n,title:i,genre_ids:r,vote_average:o})=>{const a=s(r,JSON.parse(localStorage.getItem("genres"))),l=`https://image.tmdb.org/t/p/original/${e}`;let d="";d="undefind"===n?"Date unknown":n.split("-")[0];return`<li class="card-item item" data-id="${t}">\n            <img class="film-poster" src="https://image.tmdb.org/t/p/original/${l}" alt="${i} poster" />\n            <div class="overlay">\n              <div class="film-info">\n                <p class="film-title">${i}</p>\n                <div class="film-details">\n                  <span class="film-description">${await a} | ${d}</span>\n                  <div class="stars-container">${(0,c.default)({voteAverage:o,isHero:!1})}</div>\n\t\t\t\t\t\t\t\t\t<span class="film-rating">${o}</span>;\n                </div>\n              </div>\n            </div>\n          </li>`}));return Promise.all(e).then((t=>{const e=t.join("");document.querySelector(".cards-list").insertAdjacentHTML("beforeend",e)}))}document.querySelector(".cards-list");function l(t){console.log(` error  ${t}`)}!async function(){try{const t=await o.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=41b8f9437bf3f899281f8a3f9bdc0891");localStorage.setItem("genres",JSON.stringify(t.data.genres))}catch(t){l(t)}}();o=r("2shzp");var d,u=/^\s+|\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,f=/^0o[0-7]+$/i,v=parseInt,g="object"==typeof e&&e&&e.Object===Object&&e,h="object"==typeof self&&self&&self.Object===Object&&self,y=g||h||Function("return this")(),_=Object.prototype.toString,b=Math.max,w=Math.min,k=function(){return y.Date.now()};function x(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function L(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==_.call(t)}(t))return NaN;if(x(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=x(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(u,"");var n=p.test(t);return n||f.test(t)?v(t.slice(2),n?2:8):m.test(t)?NaN:+t}d=function(t,e,n){var i,r,o,s,c,a,l=0,d=!1,u=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=i,o=r;return i=r=void 0,l=e,s=t.apply(o,n)}function f(t){return l=t,c=setTimeout(g,e),d?p(t):s}function v(t){var n=t-a;return void 0===a||n>=e||n<0||u&&t-l>=o}function g(){var t=k();if(v(t))return h(t);c=setTimeout(g,function(t){var n=e-(t-a);return u?w(n,o-(t-l)):n}(t))}function h(t){return c=void 0,m&&i?p(t):(i=r=void 0,s)}function y(){var t=k(),n=v(t);if(i=arguments,r=this,a=t,n){if(void 0===c)return f(a);if(u)return c=setTimeout(g,e),p(a)}return void 0===c&&(c=setTimeout(g,e)),s}return e=L(e)||0,x(n)&&(d=!!n.leading,o=(u="maxWait"in n)?b(L(n.maxWait)||0,e):o,m="trailing"in n?!!n.trailing:m),y.cancel=function(){void 0!==c&&clearTimeout(c),l=0,i=a=r=c=void 0},y.flush=function(){return void 0===c?s:h(k())},y};function $(t){const{backdrop_path:e,poster_path:n,title:i,release_date:r,popularity:o,vote_count:s,vote_average:c,genre_ids:a,overview:l}=t,d=r.replaceAll("-","."),u=(m=o,Math.floor(10*m)/10);var m;const p=window.screen.width<768?n:e,f=(v=["comedy","action","thriller"]).length>2?`${v.slice(0,2).join(", ")}, ...`:`${v.join(", ")}`;var v;document.createDocumentFragment(),document.querySelector(".upcoming-card"),document.styleSheets[document.styleSheets.length-1].cssRules[0];return`\n        <div class='upcoming-card__figure'>\n          <div class='upcoming-card__layout'></div>\n          <img\n            src="https://image.tmdb.org/t/p/original${p}"\n            alt="${i}"\n            loading='lazy'\n            class='upcoming-card__img'\n          > \n          </div>\n        </div>\n\n          <div class='upcoming-card__body'>\n            <h3 class="upcoming-card__title">${i}</h3>\n\n            <div class='metrics-list__main-container'>\n                <ul class="list metrics-list">\n                  <li class="metrics-list__item">\n                    <p class="metrics-text">Release date</p>\n                    <p class="metrics-text metrics-text--date">${d}</p>\n                  </li>\n                  <li class="metrics-list__item">\n                    <p class="metrics-text">Vote / Votes</p>\n                    <p class="metrics-text metrics-text--vote">\n                      <span class="vote-wrapper">${c}</span>\n                      /\n                      <span class="vote-wrapper">${s}</span>\n                    </p>\n                  </li>\n                  <li class="metrics-list__item">\n                    <p class="metrics-text">Popularity</p>\n                    <p class="metrics-text">${u}</p>\n                  </li>\n                  <li class="metrics-list__item">\n                    <p class="metrics-text">Genre</p>\n                    <p class="metrics-text">\n                      ${f}\n                    </p>\n                  </li>\n                </ul>\n            </div>\n            <h4 class="upcoming-card__subtitle metrics-text">ABOUT</h4>\n              <p class="upcoming-card__text" >\n              ${l}\n              </p>\n            <button class="btn" type="button">Add to my library</button>\n          </div>`}const S=document.querySelector(".upcoming-card");window.addEventListener("DOMContentLoaded",(async function(){try{const n=await async function(){return(await j.get()).data.results}(),i=(e=n)[Math.floor(Math.random()*e.length)];console.log(i);!function(t=""){S.innerHTML=t}($(i));const r=t(d)((()=>function({poster_path:t,backdrop_path:e,title:n}){window.matchMedia("(max-width: 767px)");const i=document.querySelector(".upcoming-card__img");if(!i)return console.log("no upcoming section");const r=`https://image.tmdb.org/t/p/original${t}`,o=`https://image.tmdb.org/t/p/original${e}`;if(window.screen.width<768&&i.src!==r)return i.src=r;if(window.screen.width>=768&&i.src!==o)return i.src=o}(i)),200);window.addEventListener("resize",r)}catch(t){console.log("error:",t),console.log("error code:",t.code)}var e}));const j=o.default.create({baseURL:"https://api.themoviedb.org/3/movie/upcoming",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmODU0Y2RkODdhYTkwNTNjYTAwMjI5ZmVhNzNlNTkyNSIsInN1YiI6IjYxODZmYWFkZmU2MzE4MDA2NDgzZTdkZSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.vm-UaTyMPJ2HhXiSRvz-VpPqqqKEF-3PBdhfYlg5v3g"}});window.addEventListener("load",(function(){const t=window.innerWidth<768?1:3;(async function(){try{return await o.default.get("https://api.themoviedb.org/3/trending/all/week?api_key=41b8f9437bf3f899281f8a3f9bdc0891")}catch(t){l(t)}})().then((({data:e})=>{a(e.results.slice(0,t)).then((()=>{console.log(e)}))}))}));
//# sourceMappingURL=index.41cd018b.js.map
