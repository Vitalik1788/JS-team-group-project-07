{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-95a375da846619ce.js","src/catalog.js","src/JS/catalog/components/refs.js","src/JS/catalog/components/api_service.js","src/javascripts/create-error-markup.js","node_modules/@parcel/runtime-js/lib/runtime-4f63533f89ced1db.js","src/javascripts/create-movie-card.js","src/JS/catalog-page.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"9NLH0\\\":\\\"catalog.fc1525e0.js\\\",\\\"bfHyM\\\":\\\"default.183d728c.jpg\\\",\\\"clsB6\\\":\\\"catalog.879308b0.js\\\",\\\"1V5gE\\\":\\\"catalog.ee0adef2.js\\\"}\"));","import './JS/header.js';\nimport './JS/hero.js';\nimport './JS/catalog-page.js';","export const refs = {\n  searchForm: document.getElementById('movieSearchForm'),\n  searchInput: document.getElementById('movieInput'),\n  catalogList: document.getElementById('movieList'),\n  errorContainer: document.querySelector('.error-container'),\n  searchBtn: document.querySelector('.search-button'),\n  cancelBtn: document.querySelector('.cancel-button'),\n  paginationContainer: document.querySelector('.pagination-wrapper'),\n  paginationButton: document.querySelector('.pagination-button'),\n  nextPageBtn: document.querySelector('.next-button'),\n  prevPageBtn: document.querySelector('.prev-button'),\n};\n","export default class ApiService {\n  static BASE_URL = 'https://api.themoviedb.org/3';\n  static API_KEY = '41b8f9437bf3f899281f8a3f9bdc0891';\n\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    this.totalAmount = 0;\n  }\n\n  async getMovies() {\n    const options = {\n      method: 'GET',\n      headers: {\n        accept: 'application/json',\n        Authorization: `Bearer ${ApiService.API_KEY}`,\n      },\n    };\n\n    let url = '';\n    if (this.searchQuery) {\n      url = `${ApiService.BASE_URL}/search/movie?api_key=${ApiService.API_KEY}&query=${this.searchQuery}&include_adult=false&language=en-US&page=${this.page}`;\n    } else {\n      url = `${ApiService.BASE_URL}/trending/all/week?api_key=${ApiService.API_KEY}&language=en-US&page=${this.page}`;\n    }\n\n    try {\n      const response = await fetch(url, options);\n      const movies = await response.json();\n      return movies;\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  decrementPage() {\n    this.page -= 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n\n  get total() {\n    return this.totalAmount;\n  }\n\n  set total(newTotal) {\n    this.totalAmount = newTotal;\n  }\n\n  resetTotal() {\n    this.totalAmount = 0;\n  }\n}\n","import { refs } from '../JS/catalog/components/refs';\n\nlet errorMarkupCreated = false;\n\nexport const createErrorMarkup = () => {\n  if (errorMarkupCreated) {\n    return; // Если функция уже вызвана, выходим из неё\n  }\n\n  const errorMarkup = `<p class=\"error-information\">OOPS...</p>\n  <p class=\"error-information\">We are very sorry!</p>\n  <p class=\"error-information\">\n    We don’t have any results matching your search.\n  </p>`;\n\n  const newErrorContainer = document.createElement('div');\n  newErrorContainer.innerHTML = errorMarkup;\n\n  refs.errorContainer.appendChild(newErrorContainer);\n  refs.errorContainer.classList.remove('is-hidden');\n  refs.paginationContainer.classList.add('is-hidden');\n\n  errorMarkupCreated = true;\n};\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bfHyM\")).toString();","import { refs } from '../JS/catalog/components/refs';\nimport defaultImg from '../images/default.jpg';\nimport starsRating from '../JS/stars-rating';\n\nexport function createMovieCard(data) {\n  const markup = data.results\n    .map(movie => {\n      const imageSrc = movie.poster_path\n        ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n        : `${defaultImg}`;\n\n      return `<li class=\"card-item\">\n            <img class=\"film-poster\" src=\"${imageSrc}\" alt=\"${\n        movie.original_title\n      }\" />\n            <div class=\"overlay\">\n              <div class=\"film-info\">\n                <p class=\"film-title\">${movie.original_title || movie.name}</p>\n                <div class=\"film-details\">\n                  <span class=\"film-description\">${[...movie.genre_ids]} | ${\n        new Date(movie.release_date).getFullYear() ||\n        new Date(movie.first_air_date).getFullYear()\n      } </span>\n      <div class=\"stars-container\">${starsRating({\n        voteAverage: movie.vote_average,\n        isHero: false,\n      })}</div>            \n\t\t\t<span class=\"film-rating\">${movie.vote_average.toFixed(1)}</span>\n                </div>\n              </div>\n            </div>\n          </li>`;\n    })\n    .join('');\n\n  refs.catalogList.innerHTML = markup;\n}\n","// Импорты\nimport { refs } from './catalog/components/refs';\nimport ApiService from './catalog/components/api_service';\nimport { createErrorMarkup } from '../javascripts/create-error-markup';\nimport { createMovieCard } from '../javascripts/create-movie-card';\n\n// Змінні\nconst apiService = new ApiService();\nlet currentPage = 1;\n\n// Слушатели событий\n\nrefs.searchForm.addEventListener('submit', getInputValue);\nrefs.cancelBtn.addEventListener('click', clearInputValue);\nrefs.searchInput.addEventListener('input', onInput);\nrefs.nextPageBtn.addEventListener('click', onNextPage);\nrefs.prevPageBtn.addEventListener('click', onPrevPage);\n\n// Приховання елементів\n\nrefs.errorContainer.classList.add('is-hidden');\nrefs.cancelBtn.classList.add('is-hidden');\n\n// Запит трендів тижня\n\nrenderWeeklyTrends(currentPage);\n\n// Функции\n\nfunction renderWeeklyTrends(page) {\n  apiService.getMovies(page).then(handleMoviesData).catch(handleError);\n}\n\nfunction handleMoviesData(data) {\n  createMovieCard(data);\n  refs.paginationButton.textContent = currentPage;\n  updateNextButtonState(data.total_pages);\n}\n\nfunction handleError(error) {\n  refs.catalogList.innerHTML = '';\n  createErrorMarkup();\n  console.error('An error occurred:', error);\n}\n\nfunction getInputValue(e) {\n  e.preventDefault();\n\n  refs.paginationContainer.classList.remove('is-hidden');\n  refs.errorContainer.classList.add('is-hidden');\n\n  const query = refs.searchInput.value.trim();\n  apiService.query = query;\n  apiService.resetPage();\n  apiService.resetTotal();\n\n  if (query === '') {\n    handleEmptyQuery();\n  } else {\n    searchMovies();\n  }\n}\n\nfunction handleEmptyQuery() {\n  refs.catalogList.innerHTML = '';\n  createErrorMarkup();\n}\n\nasync function searchMovies() {\n  try {\n    const data = await apiService.getMovies();\n    if (data.total_results === 0) {\n      handleEmptyResults();\n    } else {\n      apiService.total = data.total_results;\n      createMovieCard(data);\n      currentPage = data.page;\n      refs.paginationButton.textContent = currentPage;\n    }\n    refs.searchInput.value = '';\n  } catch (error) {\n    handleError(error);\n  }\n}\n\nfunction handleEmptyResults() {\n  refs.catalogList.innerHTML = '';\n  createErrorMarkup();\n}\n\nfunction onInput(e) {\n  if (e.currentTarget.value.trim()) {\n    refs.cancelBtn.classList.remove('is-hidden');\n  } else {\n    refs.cancelBtn.classList.add('is-hidden');\n  }\n}\n\nfunction clearInputValue() {\n  refs.cancelBtn.classList.add('is-hidden');\n  refs.searchInput.value = '';\n}\n\nfunction updateNextButtonState(totalPages) {\n  if (currentPage === totalPages) {\n    refs.nextPageBtn.setAttribute('disabled', 'disabled');\n  } else {\n    refs.nextPageBtn.removeAttribute('disabled');\n  }\n}\n\nfunction onNextPage() {\n  currentPage += 1;\n  apiService.incrementPage();\n  renderWeeklyTrends(currentPage);\n}\n\nfunction onPrevPage() {\n  if (currentPage > 1) {\n    currentPage -= 1;\n    apiService.decrementPage();\n    renderWeeklyTrends(currentPage);\n  }\n}\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$c4220199fe967ab2$export$21666b427502ea6d","searchForm","document","getElementById","searchInput","catalogList","errorContainer","querySelector","searchBtn","cancelBtn","paginationContainer","paginationButton","nextPageBtn","prevPageBtn","$3eda6201eb0cd243$export$2e2bcd8739ae039","static","constructor","this","searchQuery","page","totalAmount","async","options","method","headers","accept","Authorization","API_KEY","url","BASE_URL","response","fetch","json","error","console","incrementPage","decrementPage","resetPage","query","newQuery","total","newTotal","resetTotal","$5486431b5e8bded2$var$errorMarkupCreated","$5486431b5e8bded2$export$7e018aa348c28d8","newErrorContainer","createElement","innerHTML","appendChild","classList","remove","add","$d77a59c1df57a7d8$exports","URL","resolve","import","meta","toString","$08fc475134c44f09$export$9d27b867a89df126","data","markup","results","map","movie","poster_path","$parcel$interopDefault","original_title","name","genre_ids","Date","release_date","getFullYear","first_air_date","$h85Iw","default","voteAverage","vote_average","isHero","toFixed","join","$8b6637b774db2796$var$apiService","$8b6637b774db2796$var$currentPage","$8b6637b774db2796$var$renderWeeklyTrends","getMovies","then","$8b6637b774db2796$var$handleMoviesData","catch","$8b6637b774db2796$var$handleError","totalPages","textContent","total_pages","setAttribute","removeAttribute","addEventListener","e","preventDefault","value","trim","total_results","$8b6637b774db2796$var$searchMovies","currentTarget"],"version":3,"file":"catalog.fc1525e0.js.map"}