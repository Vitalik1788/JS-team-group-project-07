function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},r=e.parcelRequired7c6;null==r&&((r=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var r={id:t,exports:{}};return n[t]=r,e.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},e.parcelRequired7c6=r),r.register("g3iFJ",(function(t,e){const n=document.getElementById("menu"),i=document.querySelector("nav"),r=document.getElementById("overlay"),o=document.querySelector("body");n.addEventListener("click",(()=>{i.style.left="0",r.style.display="block",o.style.overflow="hidden"})),r.addEventListener("click",(()=>{i.style.left="-64%",r.style.display="none",o.style.overflow="auto"}));const s=document.querySelector(".switcher");let a="true"===localStorage.getItem("isLight");document.body.classList.toggle("light",a),s.onclick=function(){a=!a,document.body.classList.toggle("light",a),localStorage.setItem("isLight",a)};const c=window.location.href,l=document.querySelectorAll(".mobile-menu__link, .header__nav-link");if(l[0].classList.add("current__nav-link"),l[3].classList.add("current__nav-link"),!c.includes("index"))return c.includes("catalog")?(l[0].classList.remove("current__nav-link"),l[3].classList.remove("current__nav-link"),l[1].classList.add("current__nav-link"),void l[4].classList.add("current__nav-link")):c.includes("library")?(l[0].classList.remove("current__nav-link"),l[3].classList.remove("current__nav-link"),l[1].classList.remove("current__nav-link"),l[4].classList.remove("current__nav-link"),l[2].classList.add("current__nav-link"),void l[5].classList.add("current__nav-link")):void 0})),r("g3iFJ"),r("8oZBs");var o=r("2shzp");o=r("2shzp");async function s(t,e){try{const n=Array.from(e),i=t.map((t=>{const e=n.find((e=>e.id===t));return e?e.name:""}));let r="";return r=i.length>2?i.slice(0,2).join(", ")+" and other":i.join(", "),console.log(r),r}catch(t){return c(t),""}}function a(t){const e=t.map((async({id:t,poster_path:e,release_date:n,title:i,genre_ids:r,vote_average:o})=>{const a=s(r,JSON.parse(localStorage.getItem("genres"))),c=`https://image.tmdb.org/t/p/original/${e}`;let l="";l="undefind"===n?"Date unknown":n.split("-")[0];return`<li class="card-item item" data-id="${t}">\n            <img class="film-poster" src="https://image.tmdb.org/t/p/original/${c}" alt="${i} poster" />\n            <div class="overlay">\n              <div class="film-info">\n                <p class="film-title">${i}</p>\n                <div class="film-details">\n                  <span class="film-description">${await a} | ${l}</span>\n                  <span class="film-rating">${o}</span>\n                </div>\n              </div>\n            </div>\n          </li>`}));return Promise.all(e).then((t=>{const e=t.join("");document.querySelector(".cards-list").insertAdjacentHTML("beforeend",e)}))}document.querySelector(".cards-list");function c(t){console.log(` error  ${t}`)}!async function(){try{const t=await o.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=41b8f9437bf3f899281f8a3f9bdc0891");localStorage.setItem("genres",JSON.stringify(t.data.genres))}catch(t){c(t)}}();var l,d=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,p=/^0o[0-7]+$/i,f=parseInt,g="object"==typeof e&&e&&e.Object===Object&&e,v="object"==typeof self&&self&&self.Object===Object&&self,y=g||v||Function("return this")(),h=Object.prototype.toString,_=Math.max,b=Math.min,w=function(){return y.Date.now()};function k(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function $(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==h.call(t)}(t))return NaN;if(k(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=k(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(d,"");var n=m.test(t);return n||p.test(t)?f(t.slice(2),n?2:8):u.test(t)?NaN:+t}l=function(t,e,n){var i,r,o,s,a,c,l=0,d=!1,u=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=i,o=r;return i=r=void 0,l=e,s=t.apply(o,n)}function f(t){return l=t,a=setTimeout(v,e),d?p(t):s}function g(t){var n=t-c;return void 0===c||n>=e||n<0||u&&t-l>=o}function v(){var t=w();if(g(t))return y(t);a=setTimeout(v,function(t){var n=e-(t-c);return u?b(n,o-(t-l)):n}(t))}function y(t){return a=void 0,m&&i?p(t):(i=r=void 0,s)}function h(){var t=w(),n=g(t);if(i=arguments,r=this,c=t,n){if(void 0===a)return f(c);if(u)return a=setTimeout(v,e),p(c)}return void 0===a&&(a=setTimeout(v,e)),s}return e=$(e)||0,k(n)&&(d=!!n.leading,o=(u="maxWait"in n)?_($(n.maxWait)||0,e):o,m="trailing"in n?!!n.trailing:m),h.cancel=function(){void 0!==a&&clearTimeout(a),l=0,i=c=r=a=void 0},h.flush=function(){return void 0===a?s:y(w())},h};const x=(o=r("2shzp")).default.create({baseURL:"https://api.themoviedb.org/3/movie/upcoming",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmODU0Y2RkODdhYTkwNTNjYTAwMjI5ZmVhNzNlNTkyNSIsInN1YiI6IjYxODZmYWFkZmU2MzE4MDA2NDgzZTdkZSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.vm-UaTyMPJ2HhXiSRvz-VpPqqqKEF-3PBdhfYlg5v3g"}});async function L(){return(await x.get()).data.results}function S(t="my_film",e){return JSON.parse(localStorage.getItem(t)).find((t=>t.id===e))}function j(t){const{backdrop_path:e,poster_path:n,title:i,release_date:r,popularity:o,vote_count:s,vote_average:a,genre_ids:c,overview:l,id:d}=t,u=S("my_film",d)?"remove":"add",m=window.screen.width<768?n:e,p=r.replaceAll("-","."),f=(g=o,Math.floor(10*g)/10);var g;const v=(y=["comedy","action","thriller"]).length>2?`${y.slice(0,2).join(", ")}, ...`:`${y.join(", ")}`;var y;document.createDocumentFragment(),document.querySelector(".upcoming-card"),document.styleSheets[document.styleSheets.length-1].cssRules[0];return`\n        <div class='upcoming-card__figure'>\n          <div class='upcoming-card__layout'></div>\n            <img\n              src="https://image.tmdb.org/t/p/original${m}"\n              alt="${i}"\n              loading='lazy'\n              class='upcoming-card__img'\n            > \n          </div>\n        </div>\n        <div class='upcoming-card__body'>\n          <h3 class="upcoming-card__title">${i}</h3>\n          <div class='metrics-list__main-container'>\n            <ul class="list metrics-list">\n              <li class="metrics-list__item">\n                <p class="metrics-text">Release date</p>\n                <p class="metrics-text metrics-text--date">${p}</p>\n              </li>\n              <li class="metrics-list__item">\n                <p class="metrics-text">Vote / Votes</p>\n                <p class="metrics-text metrics-text--vote">\n                  <span class="vote-wrapper">${a}</span>\n                  /\n                  <span class="vote-wrapper">${s}</span>\n                </p>\n              </li>\n              <li class="metrics-list__item">\n                <p class="metrics-text">Popularity</p>\n                <p class="metrics-text">${f}</p>\n              </li>\n              <li class="metrics-list__item">\n                <p class="metrics-text">Genre</p>\n                <p class="metrics-text">${v}</p>\n              </li>\n            </ul>\n          </div>\n          <h4 class="upcoming-card__subtitle metrics-text">ABOUT</h4>\n            <p class="upcoming-card__text">${l}</p>\n          <button class="btn" type="button" data-id=${d} data-${u}>Add to my library</button>\n        </div>`}function O({poster_path:t,backdrop_path:e,title:n}){window.matchMedia("(max-width: 767px)");const i=document.querySelector(".upcoming-card__img");if(!i)return console.log("no upcoming section");const r=`https://image.tmdb.org/t/p/original${t}`,o=`https://image.tmdb.org/t/p/original${e}`;return window.screen.width<768&&i.src!==r?i.src=r:window.screen.width>=768&&i.src!==o?i.src=o:void 0}const I=document.querySelector(".upcoming-card");window.addEventListener("DOMContentLoaded",(async function(){try{const n=await L(),i=(e=n)[Math.floor(Math.random()*e.length)];console.log(i);!function(t=""){I.innerHTML=t}(j(i));const r=t(l)((()=>O(i)),200);window.addEventListener("resize",r)}catch(t){console.log("error:",t),console.log("error code:",t.code)}var e})),window.addEventListener("load",(function(){const t=window.innerWidth<768?1:3;(async function(){try{return await o.default.get("https://api.themoviedb.org/3/trending/all/week?api_key=41b8f9437bf3f899281f8a3f9bdc0891")}catch(t){c(t)}})().then((({data:e})=>{a(e.results.slice(0,t)).then((()=>{console.log(e)}))}))}));
//# sourceMappingURL=index.04af3971.js.map
