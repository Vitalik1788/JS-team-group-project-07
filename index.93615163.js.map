{"mappings":"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","sources":["src/javascript/hero.js","src/javascript/modal-trailer.js","node_modules/@parcel/runtime-js/lib/runtime-4f63533f89ced1db.js","src/javascript/global-listener.js","node_modules/@parcel/runtime-js/lib/runtime-c396ceb4029b8500.js"],"sourcesContent":["import starsRating from './stars-rating';\nimport { getMovieId } from './modal-trailer';\n\nconst API_KEY = '58fde9f9a3392c3dbee86a1f2142354e';\nconst RANDOM_NUMBER = Math.floor(Math.random() * (19 - 0 + 1)) + 0;\nconst axios = require('axios').default;\n\nconst refs = {\n  heroDiv: document.getElementById('hero-div'),\n  heroTitle: document.getElementById('hero-title'),\n  heroOverview: document.getElementById('hero-overview'),\n  heroBtnDiv: document.getElementById('hero-btn-div'),\n  heroFilmDataEl: document.querySelector('.hero-info-wrap'), //це елемент, на який вішаються дата-атрибути ID та vote_average\n};\n\nwindow.addEventListener('load', heroInfoShow);\n\nfunction heroInfoShow() {\n  getFilmInfo().then(({ data }) => {\n\n    // Змінні усієї інформації фільму\n    const filmInfo = data.results[RANDOM_NUMBER];\n    const filmPicturePath = filmInfo.backdrop_path;\n    const filmPictureUrl = `\"https://image.tmdb.org/t/p/original/${filmPicturePath}\"`;\n    const filmName = filmInfo.title;\n    const filmOverview = filmInfo.overview;\n    const filmId = filmInfo.id;\n    const filmRating = filmInfo.vote_average;\n\n    createHeroMarkUp(filmPictureUrl, filmName, filmOverview); //функція розмітки hero\n    createSuccessFetchBtnMurkUp(filmId); // функція додавання кнопок при успішному запиту\n    createDataSet(filmId, filmRating); // функція додавання дата-атрибутів при успішному запиту для трейлеру, зірочок рейтингу і таке інше\n\n    starsRating({ voteAverage: filmRating, isHero: true });\n  });\n}\n\n//базовий фетч function getFilmInfo() {\n//   return fetch(\n//     'https://api.themoviedb.org/3/trending/movie/day?api_key=58fde9f9a3392c3dbee86a1f2142354e'\n//   ).then(res => res.json());\n// }\n\nasync function getFilmInfo() {\n  try {\n    const res = await axios.get(\n      `https://api.themoviedb.org/3/trending/movie/day?api_key=${API_KEY}`\n    );\n\n    return res;\n  } catch (error) {\n    onHeroFetchError(error);\n  }\n}\n\n//базова розмітка при успішному запиту\nfunction createHeroMarkUp(picturePath, filmName, filmDescription) {\n  refs.heroDiv.style.backgroundImage = `linear-gradient(79.39deg, #111111 32.37%, rgba(17, 17, 17, 0) 72.02%), \n  url(${picturePath})`;\n  refs.heroTitle.textContent = `${filmName}`;\n  refs.heroOverview.textContent = `${filmDescription}`;\n}\n\n//базова розмітка при помилці\nfunction onHeroFetchError(err) {\n  refs.heroDiv.classList.add('hero-container-bg');\n\n  const heroDefaultImage = `../images/default-bgimage.jpg`;\n  const heroDefaultName = `Let’s Make Your Own Cinema`;\n  const heroDefaultOverview = `Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.`;\n\n  createHeroMarkUp(heroDefaultImage, heroDefaultName, heroDefaultOverview);\n  createDefaultBtnMarkUp();\n}\n\n// функція додавання кнопки при помилці запиту\nfunction createDefaultBtnMarkUp() {\n  const heroDefaultBtn = document.createElement('button');\n  heroDefaultBtn.textContent = 'Get Started';\n  heroDefaultBtn.classList.add('css-btn-trailer');\n  heroDefaultBtn.setAttribute('type', 'button');\n  refs.heroBtnDiv.append(heroDefaultBtn);\n}\n\n//функція додавання кнопок при успішному запиту\nfunction createSuccessFetchBtnMurkUp(filmId) {\n  const heroTrailertBtn = document.createElement('button');\n  heroTrailertBtn.textContent = 'Watch Trailer';\n  heroTrailertBtn.classList.add('css-btn-trailer', 'watch-trailer-button');\n  heroTrailertBtn.setAttribute('type', 'button');\n  heroTrailertBtn.setAttribute('trailer-id', `${filmId}`);\n\n  refs.heroBtnDiv.append(heroTrailertBtn);\n\n  const heroDetailstBtn = document.createElement('button');\n  heroDetailstBtn.textContent = 'More Details';\n  heroDetailstBtn.classList.add('css-bnt-info');\n  heroDetailstBtn.setAttribute('type', 'button');\n  heroDetailstBtn.setAttribute('data-id', filmId);\n\n  refs.heroBtnDiv.append(heroDetailstBtn);\n}\n\n//функція для створення дата-атрибутів для використання\nfunction createDataSet(id, rating) {\n  refs.heroFilmDataEl.dataset.id = id;\n  refs.heroFilmDataEl.dataset.rating = rating;\n}\n","import defaultImgTr from '../images/default.jpg';\nconst imageSrc = defaultImgTr;\n\nfunction playTrailer(movieId) {\n  const apiUrl = `https://api.themoviedb.org/3/movie/${movieId}/videos?api_key=41b8f9437bf3f899281f8a3f9bdc0891&language=en-US`;\n\n  fetch(apiUrl)\n    .then(response => response.json())\n    .then(data => {\n      const videoKey = data.results[0].key;\n      const videoSource = `https://www.youtube.com/embed/${videoKey}?rel=0&amp;controls=1&amp;showinfo=0`;\n\n      const video = document.createElement('iframe');\n      video.src = videoSource;\n      video.width = '560';\n      video.height = '315';\n      video.frameBorder = '0';\n      video.allow =\n        'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';\n      video.allowFullscreen = '';\n\n      const closeButton = document.createElement('span');\n      closeButton.className = 'close-button';\n      closeButton.innerHTML = `\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10.5 10.5\" width=\"10.5px\" height=\"10.5px\">\n            <path fill=\"#FFFFFF\" d=\"M9.2,1.3L8.2,0.3L5.25,3.25L2.3,0.3L1.3,1.3L4.25,4.25L1.3,7.2L2.3,8.2L5.25,5.25L8.2,8.2L9.2,7.2L6.25,4.25z\"/>\n          </svg>\n        `;\n\n      closeButton.addEventListener('click', () => {\n        const modal = document.getElementById('modal');\n        const modalContent = document.querySelector('.modal-content');\n        modalContent.innerHTML = '';\n        modal.style.display = 'none';\n        video.src = ''; // Зупиняємо відтворення трейлера\n        enableScroll(); // Вмикаємо скролінг сторінки\n      });\n\n      const modalContent = document.querySelector('.modal-content');\n      modalContent.innerHTML = '';\n      modalContent.appendChild(video);\n      modalContent.appendChild(closeButton);\n\n      const modal = document.getElementById('modal');\n      modal.style.display = 'block';\n      disableScroll(); \n    })\n    .catch(() => {\n      showModalError();\n    });\n}\n\nfunction disableScroll() {\n  document.body.style.overflow = 'hidden';\n}\n\nfunction enableScroll() {\n  document.body.style.overflow = 'auto';\n}\n\nfunction showModalError() {\n  const modalContent = document.querySelector('.modal-content');\n  modalContent.innerHTML = `\n      <div class=\"error-content\">\n        <p class=\"error-message\">OOPS... <br>We are very sorry!<br>\n        But we couldn’t find the trailer.</p>\n         <img class=\"error-image\" src='${imageSrc}' alt=\"Error!\">\n        <button class=\"close-button\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10.5 10.5\" width=\"10.5px\" height=\"10.5px\">\n            <path fill=\"#FFFFFF\" d=\"M9.2,1.3L8.2,0.3L5.25,3.25L2.3,0.3L1.3,1.3L4.25,4.25L1.3,7.2L2.3,8.2L5.25,5.25L8.2,8.2L9.2,7.2L6.25,4.25z\"/>\n          </svg>\n        </button>\n      </div>\n    `;\n\n  const modal = document.getElementById('modal');\n  modal.style.display = 'block';\n  disableScroll();\n  \n\n  const closeButton = modalContent.querySelector('.close-button');\n  closeButton.addEventListener('click', () => {\n    modal.style.display = 'none';\n    enableScroll(); \n  });\n\n  closeButton.classList.add('close-button'); // Додати клас до кнопки\n\n  const errorContent = modalContent.querySelector('.error-content');\n  errorContent.classList.add('error-content'); // Додати клас до контейнера з текстом та картинкою\n}\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  const watchTrailerButton = document.querySelector('.hero-btn-wrap');\n  const closeButton = document.querySelector('.close-button');\n  const modal = document.getElementById('modal');\n\n  watchTrailerButton.addEventListener('click', function (e) {\n    let targetItem = e.target;\n    const currentButton = targetItem.closest('.watch-trailer-button');\n    if (currentButton) {\n      const movieId = currentButton.getAttribute('trailer-id');\n      playTrailer(movieId);\n    }\n  });\n\n  document.addEventListener('keydown', event =>\n    event.key === 'Escape' ? (modal.style.display = 'none') : null\n  );\n\n  window.addEventListener('click', event =>\n    event.target === modal ? (modal.style.display = 'none') : null\n  );\n\n  closeButton.addEventListener('click', () => {\n    modal.style.display = 'none';\n    enableScroll(); \n  });\n});\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bfHyM\")).toString();","import { openModalAboutFilm } from './movieModal';\nimport { handleFilm } from './library/library';\n// import { playTrailer } from './modal-trailer';\n\nwindow.addEventListener('click', (e) => {\n  const heroDetailsButton = document.querySelector('.css-bnt-info');\n  const watchTrailerButton = document.querySelector('.watch-trailer-button');\n  // const addBtn = document.querySelector('[data-add]');\n  // const removeBtn = document.querySelector('[data-remove]');\n  const upcomingBtn = document.querySelector('.btn');\n\n\n  const id = e.target.dataset.id;\n\n  switch (e.target) {\n    case heroDetailsButton:\n      openModalAboutFilm(id);\n      break;\n\n    // case addBtn:\n    //   handleFilm(e)\n    //   break;\n\n    case upcomingBtn:\n    // case removeBtn:\n      handleFilm(e)\n      break;\n\n    case watchTrailerButton:\n      // const movieId = watchTrailerButton.getAttribute('trailer-id');\n      // playTrailer(movieId);\n      // trailerCb();\n      break;\n\n    default:\n      break;\n  }\n});\n\nfunction trailerCb() {\n  const closeButton = document.querySelector('.close-button');\n  const modal = document.getElementById('modal');\n\n  document.addEventListener('keydown', event =>\n    event.key === 'Escape' ? (modal.style.display = 'none') : null\n  );\n\n  window.addEventListener('click', event =>\n    event.target === modal ? (modal.style.display = 'none') : null\n  );\n\n  closeButton.addEventListener('click', () => {\n    modal.style.display = 'none';\n  });\n}\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"co8kk\\\":\\\"index.93615163.js\\\",\\\"bfHyM\\\":\\\"default.183d728c.jpg\\\"}\"));"],"names":["$7DS8N","parcelRequire","$4ac8f69bad660a77$var$RANDOM_NUMBER","Math","floor","random","default","$4ac8f69bad660a77$var$refs","heroDiv","document","getElementById","heroTitle","heroOverview","heroBtnDiv","heroFilmDataEl","querySelector","$4ac8f69bad660a77$var$createHeroMarkUp","picturePath","filmName","filmDescription","style","backgroundImage","textContent","window","addEventListener","async","$4ac8f69bad660a77$require$axios","get","error","err","classList","add","heroDefaultBtn","createElement","setAttribute","append","$4ac8f69bad660a77$var$createDefaultBtnMarkUp","$4ac8f69bad660a77$var$onHeroFetchError","$4ac8f69bad660a77$var$getFilmInfo","then","data","filmInfo","results","filmPictureUrl","backdrop_path","title","filmOverview","overview","filmId","id","filmRating","vote_average","rating","heroTrailertBtn","heroDetailstBtn","$4ac8f69bad660a77$var$createSuccessFetchBtnMurkUp","dataset","voteAverage","isHero","$361f44f79405a629$var$imageSrc","$parcel$interopDefault","$361f44f79405a629$var$playTrailer","movieId","fetch","response","json","videoSource","key","video","src","width","height","frameBorder","allow","allowFullscreen","closeButton","className","innerHTML","modal","display","$361f44f79405a629$var$enableScroll","modalContent1","appendChild","$361f44f79405a629$var$disableScroll","catch","modalContent","$361f44f79405a629$var$showModalError","body","overflow","watchTrailerButton","e","currentButton","target","closest","getAttribute","event","module","exports","URL","resolve","import","meta","url","toString","$a3ItO","heroDetailsButton","upcomingBtn","openModalAboutFilm","$3ycwV","handleFilm","register","JSON","parse"],"version":3,"file":"index.93615163.js.map"}