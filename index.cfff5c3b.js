function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},r=e.parcelRequired7c6;null==r&&((r=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var r={id:t,exports:{}};return n[t]=r,e.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},e.parcelRequired7c6=r),r("g3iFJ"),r("8oZBs");var o=r("2shzp");o=r("2shzp");async function s(t,e){try{const n=Array.from(e),i=t.map((t=>{const e=n.find((e=>e.id===t));return e?e.name:""}));let r="";return r=i.length>2?i.slice(0,2).join(", ")+" and other":i.join(", "),console.log(r),r}catch(t){return c(t),""}}function a(t){const e=t.map((async({id:t,poster_path:e,release_date:n,title:i,genre_ids:r,vote_average:o})=>{const a=s(r,JSON.parse(localStorage.getItem("genres"))),c=`https://image.tmdb.org/t/p/original/${e}`;let l="";l="undefind"===n?"Date unknown":n.split("-")[0];return`<li class="card-item item" data-id="${t}">\n            <img class="film-poster" src="https://image.tmdb.org/t/p/original/${c}" alt="${i} poster" />\n            <div class="overlay">\n              <div class="film-info">\n                <p class="film-title">${i}</p>\n                <div class="film-details">\n                  <span class="film-description">${await a} | ${l}</span>\n                  <span class="film-rating">${o}</span>\n                </div>\n              </div>\n            </div>\n          </li>`}));return Promise.all(e).then((t=>{const e=t.join("");document.querySelector(".cards-list").insertAdjacentHTML("beforeend",e)}))}document.querySelector(".cards-list");function c(t){console.log(` error  ${t}`)}!async function(){try{const t=await o.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=41b8f9437bf3f899281f8a3f9bdc0891");localStorage.setItem("genres",JSON.stringify(t.data.genres))}catch(t){c(t)}}();o=r("2shzp");var l,d=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,f=/^0o[0-7]+$/i,m=parseInt,g="object"==typeof e&&e&&e.Object===Object&&e,h="object"==typeof self&&self&&self.Object===Object&&self,v=g||h||Function("return this")(),y=Object.prototype.toString,b=Math.max,_=Math.min,w=function(){return v.Date.now()};function x(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function $(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==y.call(t)}(t))return NaN;if(x(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=x(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(d,"");var n=p.test(t);return n||f.test(t)?m(t.slice(2),n?2:8):u.test(t)?NaN:+t}l=function(t,e,n){var i,r,o,s,a,c,l=0,d=!1,u=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=i,o=r;return i=r=void 0,l=e,s=t.apply(o,n)}function m(t){return l=t,a=setTimeout(h,e),d?f(t):s}function g(t){var n=t-c;return void 0===c||n>=e||n<0||u&&t-l>=o}function h(){var t=w();if(g(t))return v(t);a=setTimeout(h,function(t){var n=e-(t-c);return u?_(n,o-(t-l)):n}(t))}function v(t){return a=void 0,p&&i?f(t):(i=r=void 0,s)}function y(){var t=w(),n=g(t);if(i=arguments,r=this,c=t,n){if(void 0===a)return m(c);if(u)return a=setTimeout(h,e),f(c)}return void 0===a&&(a=setTimeout(h,e)),s}return e=$(e)||0,x(n)&&(d=!!n.leading,o=(u="maxWait"in n)?b($(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==a&&clearTimeout(a),l=0,i=c=r=a=void 0},y.flush=function(){return void 0===a?s:v(w())},y};function j(t){const{backdrop_path:e,poster_path:n,title:i,release_date:r,popularity:o,vote_count:s,vote_average:a,genre_ids:c,overview:l}=t,d=r.replaceAll("-","."),u=(p=o,Math.floor(10*p)/10);var p;const f=window.screen.width<768?n:e,m=(g=["comedy","action","thriller"]).length>2?`${g.slice(0,2).join(", ")}, ...`:`${g.join(", ")}`;var g;document.createDocumentFragment(),document.querySelector(".upcoming-card"),document.styleSheets[document.styleSheets.length-1].cssRules[0];return`\n        <div class='upcoming-card__figure'>\n          <div class='upcoming-card__layout'></div>\n          <img\n            src="https://image.tmdb.org/t/p/original${f}"\n            alt="${i}"\n            loading='lazy'\n            class='upcoming-card__img'\n          > \n          </div>\n        </div>\n\n          <div class='upcoming-card__body'>\n            <h3 class="upcoming-card__title">${i}</h3>\n\n            <div class='metrics-list__main-container'>\n                <ul class="list metrics-list">\n                  <li class="metrics-list__item">\n                    <p class="metrics-text">Release date</p>\n                    <p class="metrics-text metrics-text--date">${d}</p>\n                  </li>\n                  <li class="metrics-list__item">\n                    <p class="metrics-text">Vote / Votes</p>\n                    <p class="metrics-text metrics-text--vote">\n                      <span class="vote-wrapper">${a}</span>\n                      /\n                      <span class="vote-wrapper">${s}</span>\n                    </p>\n                  </li>\n                  <li class="metrics-list__item">\n                    <p class="metrics-text">Popularity</p>\n                    <p class="metrics-text">${u}</p>\n                  </li>\n                  <li class="metrics-list__item">\n                    <p class="metrics-text">Genre</p>\n                    <p class="metrics-text">\n                      ${m}\n                    </p>\n                  </li>\n                </ul>\n            </div>\n            <h4 class="upcoming-card__subtitle metrics-text">ABOUT</h4>\n              <p class="upcoming-card__text" >\n              ${l}\n              </p>\n            <button class="btn" type="button">Add to my library</button>\n          </div>`}const O=document.querySelector(".upcoming-card");window.addEventListener("DOMContentLoaded",(async function(){try{const n=await async function(){return(await N.get()).data.results}(),i=(e=n)[Math.floor(Math.random()*e.length)];console.log(i);!function(t=""){O.innerHTML=t}(j(i));const r=t(l)((()=>function({poster_path:t,backdrop_path:e,title:n}){window.matchMedia("(max-width: 767px)");const i=document.querySelector(".upcoming-card__img");if(!i)return console.log("no upcoming section");const r=`https://image.tmdb.org/t/p/original${t}`,o=`https://image.tmdb.org/t/p/original${e}`;if(window.screen.width<768&&i.src!==r)return i.src=r;if(window.screen.width>=768&&i.src!==o)return i.src=o}(i)),200);window.addEventListener("resize",r)}catch(t){console.log("error:",t),console.log("error code:",t.code)}var e}));const N=o.default.create({baseURL:"https://api.themoviedb.org/3/movie/upcoming",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmODU0Y2RkODdhYTkwNTNjYTAwMjI5ZmVhNzNlNTkyNSIsInN1YiI6IjYxODZmYWFkZmU2MzE4MDA2NDgzZTdkZSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.vm-UaTyMPJ2HhXiSRvz-VpPqqqKEF-3PBdhfYlg5v3g"}});window.addEventListener("load",(function(){const t=window.innerWidth<768?1:3;(async function(){try{return await o.default.get("https://api.themoviedb.org/3/trending/all/week?api_key=41b8f9437bf3f899281f8a3f9bdc0891")}catch(t){c(t)}})().then((({data:e})=>{a(e.results.slice(0,t)).then((()=>{console.log(e)}))}))}));
//# sourceMappingURL=index.cfff5c3b.js.map
