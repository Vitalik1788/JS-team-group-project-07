{"mappings":"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","sources":["src/JS/hero.js","src/JS/stars-rating.js"],"sourcesContent":["import starsRating from './stars-rating';\n\nconst API_KEY = '58fde9f9a3392c3dbee86a1f2142354e';\nconst RANDOM_NUMBER = Math.floor(Math.random() * (19 - 0 + 1)) + 0;\nconst axios = require('axios').default;\n\nconst refs = {\n  heroDiv: document.getElementById('hero-div'),\n  heroTitle: document.getElementById('hero-title'),\n  heroOverview: document.getElementById('hero-overview'),\n  heroBtnDiv: document.getElementById('hero-btn-div'),\n  heroFilmDataEl: document.querySelector('.hero-info-wrap'), //це елемент, на який вішаються дата-атрибути ID та vote_average\n};\n\n// console.log(refs.heroFilmDataEl);\n\nwindow.addEventListener('load', heroInfoShow);\n\nfunction heroInfoShow() {\n  getFilmInfo().then(({ data }) => {\n    console.log(data);\n\n    // Змінні усієї інформації фільму\n    const filmInfo = data.results[RANDOM_NUMBER];\n    const filmPicturePath = filmInfo.backdrop_path;\n    const filmPictureUrl = `\"https://image.tmdb.org/t/p/original/${filmPicturePath}\"`;\n    const filmName = filmInfo.title;\n    const filmOverview = filmInfo.overview;\n    const filmId = filmInfo.id;\n    const filmRating = filmInfo.vote_average;\n\n    console.log(filmInfo, filmId, filmRating);\n\n    createHeroMarkUp(filmPictureUrl, filmName, filmOverview); //функція розмітки hero\n    createSuccessFetchBtnMurkUp(); // функція додавання кнопок при успішному запиту\n    createDataSet(filmId, filmRating); // функція додавання дата-атрибутів при успішному запиту для трейлеру, зірочок рейтингу і таке інше\n\n    starsRating({ voteAverage: filmRating, isHero: true });\n  });\n}\n\n//базовий фетч function getFilmInfo() {\n//   return fetch(\n//     'https://api.themoviedb.org/3/trending/movie/day?api_key=58fde9f9a3392c3dbee86a1f2142354e'\n//   ).then(res => res.json());\n// }\n\nasync function getFilmInfo() {\n  try {\n    const res = await axios.get(\n      `https://api.themoviedb.org/3/trending/movie/day?api_key=${API_KEY}`\n    );\n\n    return res;\n  } catch (error) {\n    onHeroFetchError(error);\n  }\n}\n\n//базова розмітка при успішному запиту\nfunction createHeroMarkUp(picturePath, filmName, filmDescription) {\n  refs.heroDiv.style.backgroundImage = `linear-gradient(79.39deg, #111111 32.37%, rgba(17, 17, 17, 0) 42.02%), \n  url(${picturePath})`;\n  refs.heroTitle.textContent = `${filmName}`;\n  refs.heroOverview.textContent = `${filmDescription}`;\n}\n\n//базова розмітка при помилці\nfunction onHeroFetchError(err) {\n  refs.heroDiv.classList.add('hero-container-bg');\n\n  const heroDefaultImage = `../images/default-bgimage.jpg`;\n  const heroDefaultName = `Let’s Make Your Own Cinema`;\n  const heroDefaultOverview = `Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.`;\n\n  createHeroMarkUp(heroDefaultImage, heroDefaultName, heroDefaultOverview);\n  createDefaultBtnMarkUp();\n}\n\n// функція додавання кнопки при помилці запиту\nfunction createDefaultBtnMarkUp() {\n  const heroDefaultBtn = document.createElement('button');\n  heroDefaultBtn.textContent = 'Get Started';\n  heroDefaultBtn.classList.add('css-btn-trailer');\n  heroDefaultBtn.setAttribute('type', 'button');\n  refs.heroBtnDiv.append(heroDefaultBtn);\n}\n\n//функція додавання кнопок при успішному запиту\nfunction createSuccessFetchBtnMurkUp() {\n  const heroTrailertBtn = document.createElement('button');\n  heroTrailertBtn.textContent = 'Watch Trailer';\n  heroTrailertBtn.classList.add('css-btn-trailer');\n  heroTrailertBtn.setAttribute('type', 'button');\n  refs.heroBtnDiv.append(heroTrailertBtn);\n\n  const heroDetailstBtn = document.createElement('button');\n  heroDetailstBtn.textContent = 'More Details';\n  heroDetailstBtn.classList.add('css-bnt-info');\n  heroDetailstBtn.setAttribute('type', 'button');\n  refs.heroBtnDiv.append(heroDetailstBtn);\n}\n\n//функція для створення дата-атрибутів для використання\nfunction createDataSet(id, rating) {\n  refs.heroFilmDataEl.dataset.id = id;\n  refs.heroFilmDataEl.dataset.rating = rating;\n}\n","// ! Імпортувати starsRating до головного скрипту кожної сторінки, де у Hero є зірковий рейтинг\n\nconst starsContainer = document.querySelector('.stars-container');\nconst lastMask = document.querySelector('#defs').lastElementChild;\nconst mask = document.querySelector('.mask');\n\nlet maskCounter = 0;\n\nconst starBg = {\n  filled: '<use href=\"#star\" fill=\"url(#star-fill--complete)\"></use>',\n  masked: '',\n  empty: '<use href=\"#star\" fill=\"none\"></use>',\n};\n\nexport default function starsRating({ voteAverage, isHero }) {\n  const starsValue = convertRatingToStars(Number(voteAverage));\n\n  starBg.masked = `<use href=\"#star\" mask=\"url(#star-fill--partly${maskCounter})\" fill=\"url(#star-fill--complete)\"></use><use href=\"#star\" fill=\"none\" stroke=\"url(#star-stroke)\"></use>`;\n\n  addMaskId(maskCounter, starsValue);\n  maskCounter++;\n\n  return placeMarkup(starsValue, isHero);\n}\n\nfunction convertRatingToStars(voteAverage) {\n  if (!voteAverage || voteAverage <= 0 || voteAverage > 10) return 0;\n  return Number((voteAverage / 2).toFixed(1));\n}\n\nfunction addMaskId(maskId, starsValue) {\n  const maskShare = Math.floor(\n    (Number.parseFloat(starsValue) - Number.parseInt(starsValue)) * 100\n  );\n\n  if (maskId === 0) {\n    mask.innerHTML = `\n\t\t<rect x=\"0\" y=\"0\" width=\"18\" height=\"16\" fill=\"white\" />\n\t\t<rect x=\"${maskShare}%\" y=\"0\" width=\"18\" height=\"16\" fill=\"black\" />`;\n  } else {\n    const newMask = `\n\t\t<mask id=\"star-fill--partly${maskId}\" class=\"mask\">\n\t\t\t<rect x=\"0\" y=\"0\" width=\"18\" height=\"16\" fill=\"white\" />\n\t\t\t<rect x=\"${maskShare}%\" y=\"0\" width=\"18\" height=\"16\" fill=\"black\" />\n\t\t</mask>`;\n\n    lastMask.insertAdjacentHTML('beforebegin', newMask);\n  }\n}\n\nfunction placeMarkup(starsValue, isHero) {\n  if (!isHero) return markupRender(starsValue);\n\n  starsContainer.insertAdjacentHTML('beforeend', markupRender(starsValue));\n\n  const refsHero = {\n    starsList: document.querySelector('.stars-list'),\n    starsListImg: document.querySelectorAll('.stars-list__img'),\n  };\n\n  starsContainer.classList.add('stars-container--hero');\n  refsHero.starsList.classList.add('stars-list--hero');\n  refsHero.starsListImg.forEach(item =>\n    item.classList.add('stars-list__img--hero')\n  );\n}\n\nfunction markupRender(starsValue) {\n  if (!starsValue) return '<p class=\"stars-absent\">Not rated yet</p>';\n\n  const starsCountFilled = Number.parseInt(starsValue);\n  const starsCountMasked = starsValue - starsCountFilled === 0 ? 0 : 1;\n  const starsCountEmpty = 5 - starsCountFilled - starsCountMasked;\n  const { filled, masked, empty } = starBg;\n\n  const starsListStart = listRender(starsValue);\n  const starsFilled = starsRender(starsCountFilled, filled);\n  const starsMasked = starsRender(starsCountMasked, masked);\n  const starsEmpty = starsRender(starsCountEmpty, empty);\n\n  return starsListStart + starsFilled + starsMasked + starsEmpty + '</ul>';\n}\n\nfunction listRender(starsValue) {\n  return `<ul class=\"stars-list\" aria-label=\"Rating: ${starsValue} stars out of 5.0\" title=\"Rating: ${starsValue} stars out of 5.0\">`;\n}\n\nfunction starsRender(starsCount, starsType) {\n  let markup = '';\n\n  for (let i = 1; i <= starsCount; i++) {\n    markup += `\n\t\t\t<li class=\"stars-list__item\">\n\t\t\t\t<svg class=\"stars-list__img\" viewBox=\"0 0 18 16\">\n\t\t\t\t\t${starsType}\n\t\t\t\t</svg>\n\t\t\t</li>`;\n  }\n\n  return markup;\n}\n"],"names":["$bpxeT","parcelRequire","$45fd2cc85fc8c3e2$var$API_KEY","$45fd2cc85fc8c3e2$var$RANDOM_NUMBER","Math","floor","random","default","$45fd2cc85fc8c3e2$var$refs","heroDiv","document","getElementById","heroTitle","heroOverview","heroBtnDiv","heroFilmDataEl","querySelector","$45fd2cc85fc8c3e2$var$_getFilmInfo","$parcel$interopDefault","$2TvXO","mark","_callee","res","$45fd2cc85fc8c3e2$require$axios","get","concat","_ctx","sent","$45fd2cc85fc8c3e2$var$onHeroFetchError","t0","apply","this","arguments","$45fd2cc85fc8c3e2$var$createHeroMarkUp","picturePath","filmName","filmDescription","style","backgroundImage","textContent","err","classList","add","heroDefaultBtn","createElement","setAttribute","append","window","addEventListener","$45fd2cc85fc8c3e2$var$getFilmInfo","then","param","data","console","log","id","rating","filmInfo","results","filmPicturePath","backdrop_path","filmPictureUrl","title","filmOverview","overview","filmId","filmRating","vote_average","heroTrailertBtn","heroDetailstBtn","$45fd2cc85fc8c3e2$var$createSuccessFetchBtnMurkUp","dataset","$2j4vU","voteAverage","isHero","$1ae0db7303710400$var$starsContainer","$1ae0db7303710400$var$lastMask","lastElementChild","$1ae0db7303710400$var$mask","$1ae0db7303710400$var$maskCounter","$1ae0db7303710400$var$starBg","filled","masked","empty","$1ae0db7303710400$export$2e2bcd8739ae039","starsValue","Number","toFixed","$1ae0db7303710400$var$convertRatingToStars","maskId","maskShare","parseFloat","parseInt","innerHTML","newMask","insertAdjacentHTML","$1ae0db7303710400$var$addMaskId","$1ae0db7303710400$var$markupRender","refsHero","starsList","starsListImg","querySelectorAll","forEach","item","$1ae0db7303710400$var$placeMarkup","starsCountFilled","starsCountMasked","starsCountEmpty","starsListStart","$1ae0db7303710400$var$listRender","$1ae0db7303710400$var$starsRender","starsCount","starsType","markup","i"],"version":3,"file":"catalog.d57cf784.js.map"}