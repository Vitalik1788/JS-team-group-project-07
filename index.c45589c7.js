!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},r=e.parcelRequired7c6;null==r&&((r=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var r={id:t,exports:{}};return n[t]=r,e.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},e.parcelRequired7c6=r),r("2j4vU"),r("kFnCB"),r("60y4I");var o=r("bpxeT"),a=r("2TvXO"),c=r("dIxxU");o=r("bpxeT"),a=r("2TvXO"),o=r("bpxeT"),a=r("2TvXO"),c=r("dIxxU");function s(){return(s=t(o)(t(a).mark((function e(){var n;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=41b8f9437bf3f899281f8a3f9bdc0891");case 3:return n=t.sent,localStorage.setItem("genres",JSON.stringify(n.data.genres)),t.abrupt("return",n);case 8:t.prev=8,t.t0=t.catch(0),x(t.t0);case 11:case"end":return t.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function l(t,e){return d.apply(this,arguments)}function d(){return(d=t(o)(t(a).mark((function e(n,i){var r,o,c;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Array.from(i),o=n.map((function(t){var e=r.find((function(e){return e.id===t}));return e?e.name:""})),c="",c=o.length>2?o.slice(0,2).join(", ")+" and other":o.join(", "),console.log(c),t.abrupt("return",c);case 9:return t.prev=9,t.t0=t.catch(0),x(t.t0),t.abrupt("return","");case 13:case"end":return t.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var u=r("2j4vU"),m=r("8MBJY"),p=r("a2hTj"),f=(m=r("8MBJY"),p=r("a2hTj"),c=r("dIxxU"),new(function(){"use strict";function e(n){t(m)(this,e),this.apiKey=n}return t(p)(e,[{key:"getMovieDetails",value:function(t){var e="https://api.themoviedb.org/3/movie/".concat(t,"?api_key=").concat(this.apiKey);return c.default.get(e)}}]),e}())("41b8f9437bf3f899281f8a3f9bdc0891")),v=null,h=function(){"use strict";function e(){var n=this;if(t(m)(this,e),null!==v)return v;this.body=document.querySelector("body"),this.body.insertAdjacentHTML("beforeend",'\n  <div class="modal-info-film-backdrop modal-film-is-hidden" data-modal>\n    <div class="modal-about-film">\n      <button type="button" class="modal__close-btn" data-modal-close>\n        <svg class="modal__close-icon" width="30" height="30" aria-label="Close">\n          <use href="./images/Modal-Close.svg#close"></use>\n        </svg>\n      </button>\n      <div class="modal-film-info-wrapper">\n        <div class="modal-wrapper-img">\n          <img\n            class="modal-film-img"\n            id="modal-film-poster-path"\n            src=""\n            alt=""\n          />\n        </div>\n        <div class="film-text-info-wrapper">\n          <h3 class="modal-film-title" id="modal-film-title"></h3>\n          <ul class="modal-film-info-list">\n            <li class="modal-film-info-item">\n              <p class="modal-film-info-label">Vote / Votes</p>\n              <p class="modal-film-info-desc">\n                <span\n                  class="desc-voted desc-vote-average"\n                  id="modal-film-vote-average"\n                ></span>\n                /\n                <span\n                  class="desc-voted desc-votes-count"\n                  id="modal-film-vote-count"\n                ></span>\n              </p>\n            </li>\n            <li class="modal-film-info-item">\n              <p class="modal-film-info-label">Popularity</p>\n              <p class="modal-film-info-desc" id="modal-film-popularity"></p>\n            </li>\n            <li class="modal-film-info-item">\n              <p class="modal-film-info-label">Genre</p>\n              <p\n                class="modal-film-info-desc film-info__desc--normal-text"\n                id="modal-film-genre"\n              ></p>\n            </li>\n          </ul>\n          <p class="modal-film-info-label">ABOUT</p>\n          <div class="container-film-descr">\n            <p class="modal-film__description" id="modal-film-description"></p>\n          </div>\n          <button class="modal-btn-add-libr"  type="button"><span class="btn-mod-text">Add to my library</span> </button>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  '),this.refs={modal:document.querySelector("[data-modal]"),modalCloseBtn:document.querySelector("[data-modal-close]"),posterPath:document.querySelector("#modal-film-poster-path"),title:document.querySelector("#modal-film-title"),voteAverage:document.querySelector("#modal-film-vote-average"),voteCount:document.querySelector("#modal-film-vote-count"),popularity:document.querySelector("#modal-film-popularity"),genre:document.querySelector("#modal-film-genre"),description:document.querySelector("#modal-film-description"),modalOpenBtn:document.querySelector("#open-modal"),modalAddOrRemoveBtn:document.querySelector("#modal-film-add-or-rm")},this.refs.modalCloseBtn.addEventListener("click",(function(){return n.hide()})),document.addEventListener("keydown",(function(t){return"Escape"===t.key?n.hide():null})),window.addEventListener("click",(function(t){return t.target===n.refs.modal?n.hide():null})),v=this}return t(p)(e,[{key:"show",value:function(){this.refs.modal.classList.remove("modal-film-is-hidden"),this.body.classList.add("body--modal-open")}},{key:"hide",value:function(){this.refs.modal.classList.add("modal-film-is-hidden"),this.body.classList.remove("body--modal-open")}},{key:"refreshData",value:function(t){this.refs.posterPath.src="https://image.tmdb.org/t/p/w500".concat(t.poster_path),this.refs.title.textContent="".concat(t.title),this.refs.voteAverage.textContent="".concat(Number(t.vote_average.toFixed(1))),this.refs.voteCount.textContent="".concat(t.vote_count),this.refs.popularity.textContent="".concat(Number(t.popularity.toFixed(1))),this.refs.genre.textContent="".concat(t.genres.map((function(t){return t.name})).join(", ")),this.refs.description.textContent="".concat(t.overview)}}]),e}();function g(t){var e=new h;f.getMovieDetails(t).then((function(t){e.refreshData(t.data),e.show()})).catch((function(t){console.error(t)}))}function y(e){var n,i=e.map((n=t(o)(t(a).mark((function e(n){var i,r,o,c,s,d,m,p,f,v;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.id,r=n.poster_path,o=n.release_date,c=n.title,s=n.genre_ids,d=n.vote_average,m=l(s,JSON.parse(localStorage.getItem("genres"))),p="https://image.tmdb.org/t/p/original/".concat(r),f="",f="undefind"===o?"Date unknown":o.split("-")[0],t.next=7,m;case 7:return v=t.sent,t.abrupt("return",'<li class="card-item item" data-id="'.concat(i,'">\n            <img class="film-poster" src="https://image.tmdb.org/t/p/original/').concat(p,'" alt="').concat(c,' poster" />\n            <div class="overlay">\n              <div class="film-info">\n                <p class="film-title">').concat(c,'</p>\n                <div class="film-details">\n                  <span class="film-description">').concat(v," | ").concat(f,'</span>\n                  <div class="stars-container">').concat((0,u.default)({voteAverage:d,isHero:!1}),'</div>\n\t\t\t\t\t\t\t\t\t<span class="film-rating">').concat(d,"</span>;\n                </div>\n              </div>\n            </div>\n          </li>"));case 9:case"end":return t.stop()}}),e)}))),function(t){return n.apply(this,arguments)}));return Promise.all(i).then((function(e){var n=e.join("");document.querySelector(".cards-list").insertAdjacentHTML("beforeend",n),document.querySelectorAll(".card-item").forEach((function(e){e.addEventListener("click",t(o)(t(a).mark((function n(){var i;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.getAttribute("data-id"),t.next=3,g(i);case 3:console.log(i);case 4:case"end":return t.stop()}}),n)}))))}))}))}document.querySelector(".cards-list");function b(){return(b=t(o)(t(a).mark((function e(){var n;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.default.get("https://api.themoviedb.org/3/trending/all/week?api_key=41b8f9437bf3f899281f8a3f9bdc0891");case 3:return n=t.sent,t.abrupt("return",n);case 7:t.prev=7,t.t0=t.catch(0),x(t.t0);case 10:case"end":return t.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function x(t){console.log(" error  ".concat(t))}!function(){s.apply(this,arguments)}(),r("gzhhY");o=r("bpxeT"),a=r("2TvXO");var w,_=r("l5bVx"),T=/^\s+|\s+$/g,k=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,O=/^0o[0-7]+$/i,j=parseInt,q="object"==typeof e&&e&&e.Object===Object&&e,M="object"==typeof self&&self&&self.Object===Object&&self,N=q||M||Function("return this")(),I=Object.prototype.toString,L=Math.max,A=Math.min,C=function(){return N.Date.now()};function D(e){var n=void 0===e?"undefined":t(_)(e);return!!e&&("object"==n||"function"==n)}function E(e){if("number"==typeof e)return e;if(function(e){return"symbol"==(void 0===e?"undefined":t(_)(e))||function(t){return!!t&&"object"==typeof t}(e)&&"[object Symbol]"==I.call(e)}(e))return NaN;if(D(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=D(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(T,"");var i=S.test(e);return i||O.test(e)?j(e.slice(2),i?2:8):k.test(e)?NaN:+e}w=function(t,e,n){var i,r,o,a,c,s,l=0,d=!1,u=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=i,o=r;return i=r=void 0,l=e,a=t.apply(o,n)}function f(t){return l=t,c=setTimeout(h,e),d?p(t):a}function v(t){var n=t-s;return void 0===s||n>=e||n<0||u&&t-l>=o}function h(){var t=C();if(v(t))return g(t);c=setTimeout(h,function(t){var n=e-(t-s);return u?A(n,o-(t-l)):n}(t))}function g(t){return c=void 0,m&&i?p(t):(i=r=void 0,a)}function y(){var t=C(),n=v(t);if(i=arguments,r=this,s=t,n){if(void 0===c)return f(s);if(u)return c=setTimeout(h,e),p(s)}return void 0===c&&(c=setTimeout(h,e)),a}return e=E(e)||0,D(n)&&(d=!!n.leading,o=(u="maxWait"in n)?L(E(n.maxWait)||0,e):o,m="trailing"in n?!!n.trailing:m),y.cancel=function(){void 0!==c&&clearTimeout(c),l=0,i=s=r=c=void 0},y.flush=function(){return void 0===c?a:g(C())},y};o=r("bpxeT"),a=r("2TvXO");var J=(c=r("dIxxU")).default.create({baseURL:"https://api.themoviedb.org/3/movie/upcoming",headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmODU0Y2RkODdhYTkwNTNjYTAwMjI5ZmVhNzNlNTkyNSIsInN1YiI6IjYxODZmYWFkZmU2MzE4MDA2NDgzZTdkZSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.vm-UaTyMPJ2HhXiSRvz-VpPqqqKEF-3PBdhfYlg5v3g")}});function U(){return B.apply(this,arguments)}function B(){return(B=t(o)(t(a).mark((function e(){var n;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.get();case 2:return n=t.sent,t.abrupt("return",n.data.results);case 4:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function z(t){return t[Math.floor(Math.random()*t.length)]}function Y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"my_film",e=arguments.length>1?arguments[1]:void 0,n=JSON.parse(localStorage.getItem(t));return null==n?void 0:n.find((function(t){return t.id===e}))}function F(t){var e,n,i=t.backdrop_path,r=t.poster_path,o=t.title,a=t.release_date,c=t.popularity,s=t.vote_count,l=t.vote_average,d=(t.genre_ids,t.overview),u=t.id,m=Y("my_film",u)?"remove":"add",p=window.screen.width<768?r:i,f=a.replaceAll("-","."),v=(e=c,Math.floor(10*e)/10),h=(n=["comedy","action","thriller"]).length>2?"".concat(n.slice(0,2).join(", "),", ..."):"".concat(n.join(", "));document.createDocumentFragment(),document.querySelector(".upcoming-card"),document.styleSheets[document.styleSheets.length-1].cssRules[0];return"\n        <div class='upcoming-card__figure'>\n          <div class='upcoming-card__layout'></div>\n            <img\n              src=\"https://image.tmdb.org/t/p/original".concat(p,'"\n              alt="').concat(o,"\"\n              loading='lazy'\n              class='upcoming-card__img'\n            > \n          </div>\n        </div>\n        <div class='upcoming-card__body'>\n          <h3 class=\"upcoming-card__title\">").concat(o,'</h3>\n          <div class=\'metrics-list__main-container\'>\n            <ul class="list metrics-list">\n              <li class="metrics-list__item">\n                <p class="metrics-text">Release date</p>\n                <p class="metrics-text metrics-text--date">').concat(f,'</p>\n              </li>\n              <li class="metrics-list__item">\n                <p class="metrics-text">Vote / Votes</p>\n                <p class="metrics-text metrics-text--vote">\n                  <span class="vote-wrapper">').concat(l,'</span>\n                  /\n                  <span class="vote-wrapper">').concat(s,'</span>\n                </p>\n              </li>\n              <li class="metrics-list__item">\n                <p class="metrics-text">Popularity</p>\n                <p class="metrics-text">').concat(v,'</p>\n              </li>\n              <li class="metrics-list__item">\n                <p class="metrics-text">Genre</p>\n                <p class="metrics-text">').concat(h,'</p>\n              </li>\n            </ul>\n          </div>\n          <h4 class="upcoming-card__subtitle metrics-text">ABOUT</h4>\n            <p class="upcoming-card__text">').concat(d,'</p>\n          <button class="btn" type="button" data-id=').concat(u," data-").concat(m,">Add to my library</button>\n        </div>")}function P(t){var e=t.poster_path,n=t.backdrop_path,i=(t.title,window.matchMedia("(max-width: 767px)"),document.querySelector(".upcoming-card__img"));if(!i)return console.log("no upcoming section");var r="https://image.tmdb.org/t/p/original".concat(e),o="https://image.tmdb.org/t/p/original".concat(n);return window.screen.width<768&&i.src!==r?i.src=r:window.screen.width>=768&&i.src!==o?i.src=o:void 0}var R=document.querySelector(".upcoming-card");function V(){return(V=t(o)(t(a).mark((function e(){var n,i,r;return t(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U();case 3:n=e.sent,i=z(n),console.log(i),W(F(i)),r=t(w)((function(){return P(i)}),200),window.addEventListener("resize",r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("error:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function W(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";R.innerHTML=t}window.addEventListener("DOMContentLoaded",(function(){return V.apply(this,arguments)})),window.addEventListener("load",(function(){var t=window.innerWidth<768?1:3;(function(){return b.apply(this,arguments)})().then((function(e){var n=e.data;y(n.results.slice(0,t)).then((function(){console.log(n)}))}))}))}();
//# sourceMappingURL=index.c45589c7.js.map
