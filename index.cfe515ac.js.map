{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/JS/library/library.js","src/JS/library/api-library.js","node_modules/@parcel/runtime-js/lib/runtime-4f63533f89ced1db.js","node_modules/@parcel/runtime-js/lib/runtime-36c8bf4cdc5bc330.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import API from './api-library';\nimport defaultImg from '../../images/default.jpg';\n\nconst libraryRef = document.querySelector('.library-card-list');\n\n\nconst btnLib = document.querySelector('.btn');\n\ntry {\n  createLIibraryMovieCard();\n} catch (error) {\n  console.log(error);\n}\n\nif (btnLib) {\n  btnLib.addEventListener('click', handleFilm);\n}\n\nexport function handleFilm(event) {\n  const id = event.currentTarget.dataset.id;\n  console.log(btnLib);\n  console.log(event);\n  console.log(btnLib.hasAttribute('data-add'));\n  if (btnLib.hasAttribute('data-add')) {\n    console.log('data-add');\n    btnLib.removeAttribute('data-add');\n\n    btnLib.setAttribute('data-remove', '');\n\n    btnLib.textContent = 'Remove from my library';\n    checkMoviCard(id);\n  } else if (btnLib.hasAttribute('data-remove')) {\n    console.log('data-remove');\n    btnLib.removeAttribute('data-remove');\n\n    btnLib.setAttribute('data-add', '');\n\n    btnLib.textContent = 'Add to my library';\n    deleteCardLibrary(id);\n  }\n}\n\n/////// ПРОВЕРКА НАЛИЧИЯ ID В LOCAL STORAGE /////////\n\nexport function checkMoviCard(id) {\n  const libraryList = JSON.parse(localStorage.getItem('library'));\n\n  if (libraryList === null) {\n    getMovi(id);\n\n    console.log('cccccccccc');\n  } else {\n    const findMoviId = libraryList.find(x => x.id === Number(id));\n\n    if (findMoviId !== undefined) {\n      return;\n    } else {\n      getMovi(id);\n      console.log('eeeeeeeeee');\n    }\n  }\n}\n\n/////// ПОЛУЧЕНИЯ ОТ СЕРВЕРА ФИЛЬМА ПО ID ///////\n\nasync function getMovi(id) {\n  const res = await API.getMoviById(id);\n  const moviObj = res.data;\n  addCardLibrary(moviObj);\n  console.log('gggggggggggg');\n}\n\n///// ФУНКЦИЯ ДОБАВЛЕНИЯ В LOCAL STORAGE ///////\n\nfunction addCardLibrary(moviObj) {\n  let library = [];\n  console.log(library);\n  library.push(moviObj);\n  console.log(library);\n  localStorage.setItem('library', JSON.stringify(library));\n  createLIibraryMovieCard();\n}\n\n///// ФУНКЦИЯ УДАЛЕНИЯ ИЗ LOCAL STORAGE ///////\n\nexport function deleteCardLibrary(id) {\n  const libraryList = JSON.parse(localStorage.getItem('library'));\n  const deletedItem = libraryList.find(x => x === id);\n  library.pop(deletedItem);\n  console.log(library.length);\n  localStorage.setItem('library', JSON.stringify(library));\n  createLIibraryMovieCard();\n}\n\nfunction createLIibraryMovieCard() {\n  library = JSON.parse(localStorage.getItem('library'));\n  console.log(library);\n  if (library === null || library.length === 0  ) {\n    console.log('qqqqqqqqqqqqqq');\n    libraryRef.innerHTML = `<div class=\"library-info\">\n        <p class=\"library-info-info\" style=\"color: white;\"> OOPS... </p>\n        <p class=\"library-info-info\" style=\"color: white;\"> We are very sorry!</p>\n        <p class=\"library-info-info\" style=\"color: white;\"> You don’t have any movies at your library.</p>\n        </div>`;\n  } else {\n    const markup = JSON.parse(localStorage.getItem('library'))\n      .map(movie => {\n        const imageSrc = movie.poster_path\n          ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n          : `${defaultImg}`;\n\n        return `<li class=\"card-item item\">\n              <img class=\"film-poster\" src=\"${imageSrc}\" alt=\"${\n          movie.original_title\n        }\" />\n              <div class=\"overlay\">\n                <div class=\"film-info\">\n                  <p class=\"film-title\">${\n                    movie.original_title || movie.name\n                  }</p>\n                  <div class=\"film-details\">\n                     <span class=\"film-description\">${\n                       new Date(movie.release_date).getFullYear() ||\n                       new Date(movie.first_air_date).getFullYear()\n                     } </span>\n                    <span class=\"film-rating\">${Math.round(\n                      movie.vote_average\n                    )}</span>\n                  </div>\n                </div>\n              </div>\n            </li>`;\n      })\n      .join('');\n\n    libraryRef.innerHTML = markup;\n  }\n}\n\n/////////////////////////////////////////////////////\n// const btnLib = document.querySelector('.btn');\n// btnLib.addEventListener('click', function (event) {\n//   const id = event.currentTarget.dataset.id;\n//   console.log(id);\n\n//   // if (btnLib.getAttribute('data-click') === '1') {\n//   //   btnLib.setAttribute('data-click', '2');\n//   //   btnLib.textContent = 'Remove from my library';\n//   //   checkMoviCard(id);\n//   // } else {\n//   //   btnLib.setAttribute('data-click', '1');\n//   //   btnLib.textContent = 'Add to my library';\n//   //   deleteCardLibrary(id);\n//   // }\n// });\n\n/////////////////////////////////////////\n// async function getMovi(id) {\n//   const moviObj = await API.getMoviById(id);\n//   console.log(moviObj);\n//   checkMoviCard(id , moviObj);\n// }\n\n// function checkMoviCard(id , moviObj) {\n//   const libraryItem = localStorage.getItem('library');\n\n//   const libraryList = JSON.parse(libraryItem);\n\n//   if (libraryItem === null) {\n//     addCardLibrary(moviObj);\n//     console.log(moviObj);\n//     console.log('qweqweqeqeqdqxx');\n\n//   } else {\n\n//     const findMovi = libraryList.map(x => x.data);\n//     const findMoviId = findMovi.find(x => x.id === Number(id));\n\n//     if (findMoviId !== undefined) {\n//       return;\n\n//     } else {\n\n//       addCardLibrary(moviObj);\n//       console.log('qweqweqeqeqdqxx');\n//     }\n//   }\n// }\n\n// function addCardLibrary(moviObj) {\n//   library.push(moviObj);\n//   console.log(library);\n//   localStorage.setItem('library', JSON.stringify(library));\n// }\n\n//   function deleteCardLibrary(moviObj) {\n//     const qwe = localStorage.getItem('library')\n//     console.log( JSON.parse(qwe))\n//     library.pop(moviObj)\n//     console.log(library)\n//     localStorage.setItem('library' , JSON.stringify(library))\n//   }\n","import axios from \"axios\";\n\n\nconst API_KEY = 'b67c8518c930f00572f5eefdd7a9d563';\n\n\nasync function getMoviById(id) {\n    const options = {\n        method: 'GET',\n        headers: {\n          accept: 'application/json',\n          Authorization: `Bearer ${API_KEY}`,\n        },\n      };\n    return axios\n      .get(`https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}`)\n\n      \n      .then(res => (res))\n      \n      .catch(error => {\n        console.log('EROR');\n      });\n\n     \n}\nexport default { getMoviById }","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bfHyM\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"b9auz\\\":\\\"index.cfe515ac.js\\\",\\\"bfHyM\\\":\\\"default.183d728c.jpg\\\"}\"));"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$44agy","parcelRequire","$d68b968cf2b83b2d$var$libraryRef","document","querySelector","$d68b968cf2b83b2d$var$btnLib","$d68b968cf2b83b2d$var$createLIibraryMovieCard","error","console","log","async","$d68b968cf2b83b2d$var$getMovi","moviObj","library","push","localStorage","setItem","JSON","stringify","$d68b968cf2b83b2d$var$addCardLibrary","default","getMoviById","data","parse","getItem","innerHTML","markup","map","movie","poster_path","$parcel$interopDefault","$iuZ0p","original_title","name","Date","release_date","getFullYear","first_air_date","Math","round","vote_average","join","addEventListener","event","currentTarget","dataset","hasAttribute","removeAttribute","setAttribute","textContent","libraryList","undefined","find","x","Number","$d68b968cf2b83b2d$export$9da70ed535e71d37","deletedItem","pop","$d68b968cf2b83b2d$export$cbc3412bdf3eebaf","$2shzp","$2f5f7fbd4a782b68$export$2e2bcd8739ae039","get","then","res","catch","module","exports","URL","resolve","import","meta","url","toString","register"],"version":3,"file":"index.cfe515ac.js.map"}