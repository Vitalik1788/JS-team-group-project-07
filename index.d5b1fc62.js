function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},o=e.parcelRequired7c6;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){i[t]=e},e.parcelRequired7c6=o),o("h85Iw"),o("g3iFJ"),o("8oZBs");var a=o("2shzp");a=o("2shzp");async function s(t,e){try{const n=Array.from(e),i=t.map((t=>{const e=n.find((e=>e.id===t));return e?e.name:""}));let o="";return o=i.length>2?i.slice(0,2).join(", ")+" and other":i.join(", "),console.log(o),o}catch(t){return f(t),""}}var l=o("h85Iw");a=o("2shzp");const r=new class{constructor(t){this.apiKey=t}getMovieDetails(t){const e=`https://api.themoviedb.org/3/movie/${t}?api_key=${this.apiKey}`;return a.default.get(e)}}("41b8f9437bf3f899281f8a3f9bdc0891");let c=null;class d{constructor(){if(null!==c)return c;this.body=document.querySelector("body"),this.body.insertAdjacentHTML("beforeend",'\n  <div class="modal-info-film-backdrop modal-film-is-hidden" data-modal>\n    <div class="modal-about-film">\n      <button type="button" class="modal__close-btn" data-modal-close>\n        <svg class="modal__close-icon" width="30" height="30" aria-label="Close">\n          <use href="./images/Modal-Close.svg#close"></use>\n        </svg>\n      </button>\n      <div class="modal-film-info-wrapper">\n        <div class="modal-wrapper-img">\n          <img\n            class="modal-film-img"\n            id="modal-film-poster-path"\n            src=""\n            alt=""\n          />\n        </div>\n        <div class="film-text-info-wrapper">\n          <h3 class="modal-film-title" id="modal-film-title"></h3>\n          <ul class="modal-film-info-list">\n            <li class="modal-film-info-item">\n              <p class="modal-film-info-label">Vote / Votes</p>\n              <p class="modal-film-info-desc">\n                <span\n                  class="desc-voted desc-vote-average"\n                  id="modal-film-vote-average"\n                ></span>\n                /\n                <span\n                  class="desc-voted desc-votes-count"\n                  id="modal-film-vote-count"\n                ></span>\n              </p>\n            </li>\n            <li class="modal-film-info-item">\n              <p class="modal-film-info-label">Popularity</p>\n              <p class="modal-film-info-desc" id="modal-film-popularity"></p>\n            </li>\n            <li class="modal-film-info-item">\n              <p class="modal-film-info-label">Genre</p>\n              <p\n                class="modal-film-info-desc film-info__desc--normal-text"\n                id="modal-film-genre"\n              ></p>\n            </li>\n          </ul>\n          <p class="modal-film-info-label">ABOUT</p>\n          <div class="container-film-descr">\n            <p class="modal-film__description" id="modal-film-description"></p>\n          </div>\n          <button class="modal-btn-add-libr"  type="button"><span class="btn-mod-text">Add to my library</span> </button>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  '),this.refs={modal:document.querySelector("[data-modal]"),modalCloseBtn:document.querySelector("[data-modal-close]"),posterPath:document.querySelector("#modal-film-poster-path"),title:document.querySelector("#modal-film-title"),voteAverage:document.querySelector("#modal-film-vote-average"),voteCount:document.querySelector("#modal-film-vote-count"),popularity:document.querySelector("#modal-film-popularity"),genre:document.querySelector("#modal-film-genre"),description:document.querySelector("#modal-film-description"),modalOpenBtn:document.querySelector("#open-modal"),modalAddOrRemoveBtn:document.querySelector("#modal-film-add-or-rm")},this.refs.modalCloseBtn.addEventListener("click",(()=>this.hide())),document.addEventListener("keydown",(t=>"Escape"===t.key?this.hide():null)),window.addEventListener("click",(t=>t.target===this.refs.modal?this.hide():null)),c=this}show(){this.refs.modal.classList.remove("modal-film-is-hidden"),this.body.classList.add("body--modal-open")}hide(){this.refs.modal.classList.add("modal-film-is-hidden"),this.body.classList.remove("body--modal-open")}refreshData(t){this.refs.posterPath.src=`https://image.tmdb.org/t/p/w500${t.poster_path}`,this.refs.title.textContent=`${t.title}`,this.refs.voteAverage.textContent=`${Number(t.vote_average.toFixed(1))}`,this.refs.voteCount.textContent=`${t.vote_count}`,this.refs.popularity.textContent=`${Number(t.popularity.toFixed(1))}`,this.refs.genre.textContent=`${t.genres.map((t=>t.name)).join(", ")}`,this.refs.description.textContent=`${t.overview}`}}function m(t){const e=new d;r.getMovieDetails(t).then((t=>{e.refreshData(t.data),e.show()})).catch((t=>{console.error(t)}))}function u(t){const e=t.map((async({id:t,poster_path:e,release_date:n,title:i,genre_ids:o,vote_average:a})=>{const r=s(o,JSON.parse(localStorage.getItem("genres"))),c=`https://image.tmdb.org/t/p/original/${e}`;let d="";d="undefind"===n?"Date unknown":n.split("-")[0];return`<li class="card-item item" data-id="${t}">\n            <img class="film-poster" src="https://image.tmdb.org/t/p/original/${c}" alt="${i} poster" />\n            <div class="overlay">\n              <div class="film-info">\n                <p class="film-title">${i}</p>\n                <div class="film-details">\n                  <span class="film-description">${await r} | ${d}</span>\n                  <div class="stars-container">${(0,l.default)({voteAverage:a,isHero:!1})}</div>\n\t\t\t\t\t\t\t\t\t<span class="film-rating">${a}</span>;\n                </div>\n              </div>\n            </div>\n          </li>`}));return Promise.all(e).then((t=>{const e=t.join("");document.querySelector(".cards-list").insertAdjacentHTML("beforeend",e);document.querySelectorAll(".card-item").forEach((t=>{t.addEventListener("click",(async()=>{const e=t.getAttribute("data-id");await m(e),console.log(e)}))}))}))}document.querySelector(".cards-list");function f(t){console.log(` error  ${t}`)}!async function(){try{const t=await a.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=41b8f9437bf3f899281f8a3f9bdc0891");localStorage.setItem("genres",JSON.stringify(t.data.genres))}catch(t){f(t)}}(),o("iq1cD");var p,v=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,y=/^0o[0-7]+$/i,b=parseInt,_="object"==typeof e&&e&&e.Object===Object&&e,w="object"==typeof self&&self&&self.Object===Object&&self,$=_||w||Function("return this")(),x=Object.prototype.toString,S=Math.max,q=Math.min,j=function(){return $.Date.now()};function O(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function N(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==x.call(t)}(t))return NaN;if(O(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=O(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(v,"");var n=g.test(t);return n||y.test(t)?b(t.slice(2),n?2:8):h.test(t)?NaN:+t}p=function(t,e,n){var i,o,a,s,l,r,c=0,d=!1,m=!1,u=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=i,a=o;return i=o=void 0,c=e,s=t.apply(a,n)}function p(t){return c=t,l=setTimeout(h,e),d?f(t):s}function v(t){var n=t-r;return void 0===r||n>=e||n<0||m&&t-c>=a}function h(){var t=j();if(v(t))return g(t);l=setTimeout(h,function(t){var n=e-(t-r);return m?q(n,a-(t-c)):n}(t))}function g(t){return l=void 0,u&&i?f(t):(i=o=void 0,s)}function y(){var t=j(),n=v(t);if(i=arguments,o=this,r=t,n){if(void 0===l)return p(r);if(m)return l=setTimeout(h,e),f(r)}return void 0===l&&(l=setTimeout(h,e)),s}return e=N(e)||0,O(n)&&(d=!!n.leading,a=(m="maxWait"in n)?S(N(n.maxWait)||0,e):a,u="trailing"in n?!!n.trailing:u),y.cancel=function(){void 0!==l&&clearTimeout(l),c=0,i=r=o=l=void 0},y.flush=function(){return void 0===l?s:g(j())},y};const T=(a=o("2shzp")).default.create({baseURL:"https://api.themoviedb.org/3/movie/upcoming",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmODU0Y2RkODdhYTkwNTNjYTAwMjI5ZmVhNzNlNTkyNSIsInN1YiI6IjYxODZmYWFkZmU2MzE4MDA2NDgzZTdkZSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.vm-UaTyMPJ2HhXiSRvz-VpPqqqKEF-3PBdhfYlg5v3g"}});async function M(){return(await T.get()).data.results}function k(t="my_film",e){return JSON.parse(localStorage.getItem(t))?.find((t=>t.id===e))}function L(t){const{backdrop_path:e,poster_path:n,title:i,release_date:o,popularity:a,vote_count:s,vote_average:l,genre_ids:r,overview:c,id:d}=t,m=k("my_film",d)?"remove":"add",u=window.screen.width<768?n:e,f=o.replaceAll("-","."),p=(v=a,Math.floor(10*v)/10);var v;const h=(g=["comedy","action","thriller"]).length>2?`${g.slice(0,2).join(", ")}, ...`:`${g.join(", ")}`;var g;document.createDocumentFragment(),document.querySelector(".upcoming-card"),document.styleSheets[document.styleSheets.length-1].cssRules[0];return`\n        <div class='upcoming-card__figure'>\n          <div class='upcoming-card__layout'></div>\n            <img\n              src="https://image.tmdb.org/t/p/original${u}"\n              alt="${i}"\n              loading='lazy'\n              class='upcoming-card__img'\n            > \n          </div>\n        </div>\n        <div class='upcoming-card__body'>\n          <h3 class="upcoming-card__title">${i}</h3>\n          <div class='metrics-list__main-container'>\n            <ul class="list metrics-list">\n              <li class="metrics-list__item">\n                <p class="metrics-text">Release date</p>\n                <p class="metrics-text metrics-text--date">${f}</p>\n              </li>\n              <li class="metrics-list__item">\n                <p class="metrics-text">Vote / Votes</p>\n                <p class="metrics-text metrics-text--vote">\n                  <span class="vote-wrapper">${l}</span>\n                  /\n                  <span class="vote-wrapper">${s}</span>\n                </p>\n              </li>\n              <li class="metrics-list__item">\n                <p class="metrics-text">Popularity</p>\n                <p class="metrics-text">${p}</p>\n              </li>\n              <li class="metrics-list__item">\n                <p class="metrics-text">Genre</p>\n                <p class="metrics-text">${h}</p>\n              </li>\n            </ul>\n          </div>\n          <h4 class="upcoming-card__subtitle metrics-text">ABOUT</h4>\n            <p class="upcoming-card__text">${c}</p>\n          <button class="btn" type="button" data-id=${d} data-${m}>Add to my library</button>\n        </div>`}function A({poster_path:t,backdrop_path:e,title:n}){window.matchMedia("(max-width: 767px)");const i=document.querySelector(".upcoming-card__img");if(!i)return console.log("no upcoming section");const o=`https://image.tmdb.org/t/p/original${t}`,a=`https://image.tmdb.org/t/p/original${e}`;return window.screen.width<768&&i.src!==o?i.src=o:window.screen.width>=768&&i.src!==a?i.src=a:void 0}const I=document.querySelector(".upcoming-card");window.addEventListener("DOMContentLoaded",(async function(){try{const n=await M(),i=(e=n)[Math.floor(Math.random()*e.length)];console.log(i);!function(t=""){I.innerHTML=t}(L(i));const o=t(p)((()=>A(i)),200);window.addEventListener("resize",o)}catch(t){console.error("error:",t)}var e})),window.addEventListener("load",(function(){const t=window.innerWidth<768?1:3;(async function(){try{return await a.default.get("https://api.themoviedb.org/3/trending/all/week?api_key=41b8f9437bf3f899281f8a3f9bdc0891")}catch(t){f(t)}})().then((({data:e})=>{u(e.results.slice(0,t)).then((()=>{console.log(e)}))}))}));
//# sourceMappingURL=index.d5b1fc62.js.map
